import{q as Y}from"./lodash.22f463b4.js";import{d as me,i as Ce,r as ce,b as M,w as de,e as s,o as w,x as P,k as a,g as o,j as t,u as f,f as z,y as _e,F as pe,l as D,B as se,n as ue,aj as re,ai as q,be as Ee,c as he,N as Te,t as ve,v as O,$ as Re,a0 as Ie,a1 as Ne,ad as be,z as ge,A as Fe,ak as Ve,bm as Pe,ae as De,U as Oe,S as Ke,L as Be,bn as ze,bo as qe,p as we}from"./element-plus.59ccb443.js";import{t as Me,D as je,v as xe,w as We,x as He,y as Je,z as Ge,A as Qe}from"./login.a4e9287e.js";import{u as ke,S as $e,A as Le,a as te,D as G,d as Xe,b as Ye,_ as Ze,c as et}from"./index.vue_vue_type_style_index_0_scoped_7b7c1886_lang.2666f209.js";import{S as Ae,c as tt,d as at}from"./index-a95bb620.js";import{_ as Ue}from"./error.229cea25.js";import"../../app-config.js";import"./echarts.39e3cf74.js";import"./wujie-vue3.9ecbe737.js";import"./smartweb3.2d5e4c59.js";import"./smart-ui.e8e0134c.js";const lt={class:"main-content"},ot={class:"title"},it=o("span",null,"批量注册",-1),st={class:"main"},nt={class:"card"},dt=o("div",{class:"subtitle"},"基本信息",-1),rt={class:"content-wrap"},ct={class:"form"},ut={class:"item-wrap item2"},pt=o("span",{style:{color:"#c0c4cc"}},"将根据算法包自动获取",-1),mt={class:"item-wrap item2"},ft={class:"item-wrap"},gt={class:"card"},_t=o("div",{class:"subtitle"},"算法信息",-1),vt={class:"content-wrap"},ht={class:"form"},yt={class:"item-wrap item2"},bt=o("span",{style:{color:"#c0c4cc"}},"将根据算法包自动获取",-1),Dt=o("span",{style:{color:"#c0c4cc"}},"将根据算法包自动获取",-1),Vt={class:"item-wrap item2"},kt=["title"],wt={class:"item-wrap"},xt={class:"card"},Ct=o("div",{class:"subtitle"},"版本信息",-1),Tt={class:"content-wrap"},$t={class:"form"},Lt={class:"item-wrap item2"},At={class:"item-wrap"},Ut={class:"footer"},St=me({__name:"RegisterDialog",props:{visible:{type:Boolean,default:!1},domId:{}},emits:["update:visible","close","save"],setup(le,{emit:Q}){const j=Q,U=le,v=Ce("getCatalogNode"),e=ce({submiting:!1,isUsingVersion:!0,defaultEditData:{name:"",type:null,version:"0.1",description:"",fileName:"",status:1,remark:"",executorId:"",entryParam:"",nodeType:"",systemType:""},editData:{},rules:{type:[{required:!0,message:"所属分组不能为空",trigger:["change"]}],version:[{required:!0,message:"版本号不能为空",trigger:["blur"]}],fileName:[{required:!0,message:"请上传算法包",trigger:["change"]}]},fileList:[],executorList:[]}),{classifyTreeData:K,treeProps:l,catalogNameMap:Z}=ke(e.editData),W=M(),F=M(),h=M(),_=M(!1);de(()=>U.visible,()=>{_.value=U.visible});function C(){var g;if(F.value&&F.value.clearFiles(),e.fileList=[],e.editData=Y.cloneDeep(e.defaultEditData),e.isUsingVersion=!0,v!=null&&v())e.editData.type={id:(g=v==null?void 0:v())==null?void 0:g.id,[l.value.label]:""};else{const n=K.value.find(A=>A.isDefault);e.editData.type={id:n==null?void 0:n.id,[l.value.label]:""}}ee(),ue(()=>{setTimeout(()=>{var n;e.editData.type[l.value.label]=Z.value.get(e.editData.type.id),(n=h.value)==null||n.clearValidate()},50)})}function x(){j("update:visible",!1)}function ee(){e.executorList=[],Le.getExecutorPageList({rows:99999}).then(g=>{g.code==="0000"?e.executorList=g.data?g.data.records||[]:[]:re({type:"error",message:g.message||"获取执行器列表数据失败"})}).catch(g=>{re({type:"error",message:g.message||"获取执行器列表数据错误"})})}function X(g,n){}function H(g,n){var A;e.fileList=n,e.editData.fileName=n.length===0?"":"fileName",(A=h.value)==null||A.validateField("fileName")}function S(g){}function p(g){var n,A,r;e.fileList=e.fileList.filter(d=>d.uid!==g.uid),e.editData.fileName=e.fileList.length===0?"":"fileName",(n=h.value)==null||n.validateField("fileName"),F.value.handleRemove(g),e.fileList.length===0&&((r=(A=f(W).popperRef)==null?void 0:A.triggerRef)==null||r.click())}function m(g){if(!e.editData.entryParam){const n=e.executorList.find(A=>A.id===g);n&&(e.editData.entryParam=(n==null?void 0:n.entryParam)??"")}}function u(){var g;(g=h.value)==null||g.validate(n=>{if(n){const{name:A,type:r,status:d,remark:k,version:V,description:E,executorId:R,entryParam:L,nodeType:I,systemType:J}=e.editData,N={name:A,catalog:r[l.value.label],catalogId:r.id,version:V,description:E,useVersion:e.isUsingVersion,remark:k,status:d,executorId:R,entryParam:L,nodeType:I,systemType:J};e.submiting=!0;const y=e.fileList.length>1?"批量":"";N.files=[];for(let i=0;i<e.fileList.length;i++)N.files.push(e.fileList[i].raw);const B=new FormData;for(const i in N)if(i==="files")for(let c=0;c<N[i].length;c++)B.append("files",N[i][c]);else B.append(i,N[i]);te.registerBatchAlgorithm(B).then(i=>{e.submiting=!1,i.code==="0000"?(q({type:"success",title:`${y}注册算法成功`}),x(),j("save")):q({type:"error",title:`${y}注册算法失败`,message:i.message})}).catch(i=>{e.submiting=!1,q({type:"error",title:`${y}注册算法失败`,message:i.message})})}})}return(g,n)=>{const A=s("ArrowLeft"),r=s("el-icon"),d=s("el-divider"),k=s("el-form-item"),V=s("el-switch"),E=s("el-input"),R=s("el-option"),L=s("el-select"),I=s("el-button"),J=s("el-upload"),N=s("el-popover"),y=s("el-checkbox"),B=s("el-form");return w(),P(f($e),{id:"register-full-dialog",modelValue:_.value,"onUpdate:modelValue":n[9]||(n[9]=i=>_.value=i),class:"full-dialog common-full-dialog","append-to-dom":g.domId,"modal-append-to-body":!1,fullscreen:"","is-custom":"","close-on-press-escape":!1,onOpen:C,onClosed:x},{default:a(()=>[o("div",lt,[o("div",ot,[t(r,{onClick:x},{default:a(()=>[t(A)]),_:1}),t(d,{direction:"vertical"}),it]),o("div",st,[t(B,{ref_key:"editFormRef",ref:h,class:"edit-form",inline:"",model:e.editData,rules:e.rules,"label-width":"100px","label-position":"right"},{default:a(()=>[o("div",nt,[dt,o("div",rt,[o("div",ct,[o("div",ut,[t(k,{label:"算法名称：",prop:"name"},{default:a(()=>[pt]),_:1}),t(k,{label:"所属分组：",prop:"type"},{default:a(()=>[t(f(Ae),{modelValue:e.editData.type,"onUpdate:modelValue":n[0]||(n[0]=i=>e.editData.type=i),"tree-props":f(l),"tree-data":f(K),"value-key":"id",clearable:"",style:{width:"100%"}},null,8,["modelValue","tree-props","tree-data"])]),_:1})]),o("div",mt,[t(k,{label:"发布状态：",prop:"status"},{default:a(()=>[t(V,{modelValue:e.editData.status,"onUpdate:modelValue":n[1]||(n[1]=i=>e.editData.status=i),class:"swith-btn","active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),o("div",ft,[t(k,{label:"算法说明：",prop:"remark"},{default:a(()=>[t(E,{modelValue:e.editData.remark,"onUpdate:modelValue":n[2]||(n[2]=i=>e.editData.remark=i),type:"textarea",placeholder:"请输入算法说明",clearable:"",rows:2,maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1})])])])]),o("div",gt,[_t,o("div",vt,[o("div",ht,[o("div",yt,[t(k,{label:"算法类型：",prop:"nodeType"},{default:a(()=>[bt]),_:1}),t(k,{label:"运行系统：",prop:"systemType"},{default:a(()=>[Dt]),_:1})]),o("div",Vt,[t(k,{label:"执行器：",prop:"executorId"},{default:a(()=>[t(L,{modelValue:e.editData.executorId,"onUpdate:modelValue":n[3]||(n[3]=i=>e.editData.executorId=i),style:{width:"100%"},clearable:"",placeholder:"请选择",onChange:m},{default:a(()=>[(w(!0),z(pe,null,_e(e.executorList,i=>(w(),P(R,{key:i.id,label:i.name,value:i.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(k,{label:"算法包：",prop:"fileName",class:"zipUploadItem"},{default:a(()=>[t(J,{ref_key:"uploadRef",ref:F,class:"upload-demo",action:"fakeaction",multiple:"",accept:".zip","on-change":H,"on-remove":X,"file-list":e.fileList,"auto-upload":!1,"show-file-list":!1,"http-request":S},{trigger:a(()=>[t(I,{type:"primary"},{default:a(()=>[D("选取文件")]),_:1})]),_:1},8,["file-list"]),t(N,{ref_key:"popoverRef",ref:W,"popper-class":"algorithm-filelist-popover",placement:"bottom-end",width:"400px","hide-after":0,trigger:"click"},{reference:a(()=>[t(I,{class:"listBtn",disabled:e.fileList.length===0},{default:a(()=>[D(" 已选取 "+se(e.fileList.length)+" 个文件，点击查看 ",1)]),_:1},8,["disabled"])]),default:a(()=>[(w(!0),z(pe,null,_e(e.fileList,i=>(w(),z("div",{key:i.uid,class:"text item"},[o("span",{class:"fileName",title:i.name},se(i.name),9,kt),t(r,{class:"delete",title:"移除",onClick:c=>p(i)},{default:a(()=>[t(f(Ee))]),_:2},1032,["onClick"])]))),128))]),_:1},512)]),_:1})]),o("div",wt,[t(k,{label:"入口参数：",prop:"entryParam"},{default:a(()=>[t(E,{modelValue:e.editData.entryParam,"onUpdate:modelValue":n[4]||(n[4]=i=>e.editData.entryParam=i),type:"text",placeholder:"为空时将自动获取执行器对应的入口参数",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1})])])])]),o("div",xt,[Ct,o("div",Tt,[o("div",$t,[o("div",Lt,[t(k,{label:"版本号：",prop:"version"},{default:a(()=>[t(E,{modelValue:e.editData.version,"onUpdate:modelValue":n[5]||(n[5]=i=>e.editData.version=i),class:"mr",type:"text",placeholder:"请输入",style:{flex:"1"},maxlength:"20","show-word-limit":""},{prepend:a(()=>[D("V")]),_:1},8,["modelValue"])]),_:1}),t(k,null,{default:a(()=>[t(y,{modelValue:e.isUsingVersion,"onUpdate:modelValue":n[6]||(n[6]=i=>e.isUsingVersion=i),disabled:""},{default:a(()=>[D("使用此版本")]),_:1},8,["modelValue"])]),_:1})]),o("div",At,[t(k,{label:"版本说明：",prop:"description"},{default:a(()=>[t(E,{modelValue:e.editData.description,"onUpdate:modelValue":n[7]||(n[7]=i=>e.editData.description=i),type:"textarea",placeholder:"请输入版本说明",clearable:"",rows:2,maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1})])])])])]),_:1},8,["model","rules"])]),o("div",Ut,[t(I,{onClick:n[8]||(n[8]=i=>_.value=!1)},{default:a(()=>[D("取 消")]),_:1}),t(I,{type:"primary",loading:e.submiting,onClick:u},{default:a(()=>[D("确 定")]),_:1},8,["loading"])])])]),_:1},8,["modelValue","append-to-dom"])}}}),Et={class:"common-tree__header"},Rt={class:"common-tree__checkbox"},It={class:"tree-node"},Nt={class:"tree-node__label"},Ft={class:"text"},Pt={key:0,class:"tree-node__toolbar"},Ot=["onClick"],Kt=["onClick"],Bt=["onClick"],zt={class:"classify-data"},qt={class:"item-wrap"},Mt={class:"item-wrap"},jt={class:"item-wrap"},Wt={class:"dialog-footer"},Ht=me({__name:"CatalogTree",emits:["change","setData"],setup(le,{expose:Q,emit:j}){const U=j,v=M(),e=M(),K=M(),l=ce({isLoadingTree:!0,classifyTreeData:[],filterText:"",treeProps:{label:"name",children:"children"},defaultExpandedkeys:[],curActiveKey:"#",checkAll:!0,selectText:"所有数据",dialogType:G.ADD,curClassifyData:{},dialogVisible:!1,submiting:!1,defaultData:{name:"",pid:"#",description:""},editData:{},rules:{name:[{required:!0,message:"目录名称不能为空",trigger:["change","blur"]},{min:0,max:10,message:"长度在 10 个字符以内",trigger:["blur","change"]}],pid:[{required:!0,message:"上级目录不能为空",trigger:["change"]}]}}),Z=he(()=>{if(l.classifyTreeData.length===0)return[{value:"#",label:"/"}];{let p=[{value:"#",label:"/",idx:0}];const m=(g,n,A)=>{g.forEach(r=>{var V;const d=r.pid==="#"?r.name:`${n} / ${r.name}`,k=r.pid==="#"?1:A;p.push({value:r.id,label:d,idx:k}),((V=r==null?void 0:r.children)==null?void 0:V.length)>0&&m(r.children,d,k+1)})},u=Y.cloneDeep(l.classifyTreeData).filter(g=>!g.isDefault);return m(u,"",1),l.dialogType===G.EDIT&&(p=p.filter(g=>g.value!==l.editData.id)),p=p.filter(g=>g.idx<=3),p}});de(()=>l.filterText,p=>{e.value.filter(p)}),Te(()=>{F()});function W(p){if(p)l.curActiveKey="#",e.value.setCurrentKey(null),l.selectText="所有数据",U("change",l.curActiveKey);else{const m=l.classifyTreeData.find(u=>u.isDefault);l.curActiveKey=m.id,e.value.setCurrentKey(l.curActiveKey),l.selectText=m.name,U("change",l.curActiveKey)}}function F(p=!1){l.isLoadingTree=!0,te.getClassifyTree().then(m=>{m.code==="0000"&&(l.classifyTreeData=Y.cloneDeep(m.data)||[],U("setData",Y.cloneDeep(l.classifyTreeData)),p?ue(()=>{l.curActiveKey=l.classifyTreeData[0].id,e.value.setCurrentKey(l.curActiveKey),U("change",l.curActiveKey),l.selectText=l.classifyTreeData[0].name}):ue(()=>{e.value.setCurrentKey(l.curActiveKey)}))}).catch(()=>{}).finally(()=>{l.isLoadingTree=!1})}function h(){l.curClassifyData={pid:"#"},l.dialogType=G.ADD,l.dialogVisible=!0}function _(p,m,u){return p?tt(p,m,u,l.treeProps.label):!0}function C(p,m){p&&(l.curActiveKey=p.id,l.selectText=p.name,l.checkAll=!1,e.value.setCurrentKey(l.curActiveKey),U("change",l.curActiveKey))}function x(p){l.curClassifyData={pid:p.id},l.dialogType=G.ADD,l.dialogVisible=!0}function ee(p){l.curClassifyData=Y.cloneDeep(p),l.dialogType=G.EDIT,l.dialogVisible=!0}function X(p){Ve.confirm(`删除【${p[l.treeProps.label]}】分类, 是否继续?`,"提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(()=>{te.deleteClassify(p.id).then(m=>{m.code==="0000"?(q({type:"success",title:"删除成功"}),F(l.curActiveKey===p.id)):q({type:"error",title:"删除失败"})}).catch(m=>{q({type:"error",title:"删除失败",message:m.message||"服务连接有错"})})}).catch(()=>{})}function H(){l.dialogType===G.ADD?(l.editData=Y.cloneDeep(l.defaultData),l.editData.pid=l.curClassifyData.pid):l.dialogType===G.EDIT&&(l.editData={...l.curClassifyData}),ue(()=>{v.value.clearValidate()})}function S(){v.value.validate(p=>{if(p){const m=l.dialogType===G.ADD?"新增":"编辑",u=l.dialogType===G.ADD?"addClassify":"modifyClassify",g={...l.editData};l.dialogType!==G.ADD&&(delete g.children,delete g.level),l.submiting=!0,te[u](g).then(n=>{l.submiting=!1,n.code==="0000"?(q({type:"success",title:`${m}目录成功`}),l.dialogVisible=!1,F()):q({type:"error",title:`${m}目录失败`,message:n.message})}).catch(n=>{l.submiting=!1,q({type:"error",title:`${m}目录失败`,message:n.message})})}})}return Q({treeRef:e,treeAsideRef:K}),(p,m)=>{const u=s("el-input"),g=s("el-button"),n=s("el-checkbox"),A=s("circle-plus"),r=s("ElIcon"),d=s("ElTooltip"),k=s("Edit"),V=s("Delete"),E=s("el-scrollbar"),R=s("el-form-item"),L=s("el-option"),I=s("el-select"),J=s("el-form"),N=s("el-dialog"),y=ve("action"),B=ve("loading");return O((w(),z("div",{ref_key:"treeAsideRef",ref:K,class:"common-tree","element-loading-text":"拼命加载中..."},[o("div",Et,[t(u,{modelValue:l.filterText,"onUpdate:modelValue":m[0]||(m[0]=i=>l.filterText=i),placeholder:"请输入关键字搜索","prefix-icon":f(Re),clearable:""},null,8,["modelValue","prefix-icon"]),O(t(g,{class:"common-tree__header-btn",type:"primary",title:"新增",icon:f(Ie),plain:"",onClick:h},null,8,["icon"]),[[y,"algorithm_catalog_add"]])]),o("div",Rt,[t(n,{modelValue:l.checkAll,"onUpdate:modelValue":m[1]||(m[1]=i=>l.checkAll=i),label:"查看所有",size:"large",onChange:m[2]||(m[2]=i=>W(l.checkAll))},null,8,["modelValue"])]),t(E,{class:"common-tree__wrapper"},{default:a(()=>[t(f(Ne),{ref_key:"treeRef",ref:e,data:l.classifyTreeData,props:l.treeProps,"node-key":"id","empty-text":"暂无数据","default-expand-all":"","default-expanded-keys":l.defaultExpandedkeys,"highlight-current":"","current-node-key":l.curActiveKey,"expand-on-click-node":!1,"filter-node-method":_,onCurrentChange:C},{default:a(({node:i,data:c})=>[o("span",It,[o("span",Nt,[o("span",Ft,se(i.label),1)]),l.curActiveKey===c.id?(w(),z("div",Pt,[!c.isDefault&&c.level<4?O((w(),z("span",{key:0,onClick:be(T=>x(c),["stop"])},[t(d,{content:"添加子目录",placement:"bottom"},{default:a(()=>[t(r,{size:"16",color:"var(--el-color-primary)"},{default:a(()=>[t(A)]),_:1})]),_:1})],8,Ot)),[[y,"algorithm_catalog_add"]]):ge("",!0),c.isDefault?ge("",!0):O((w(),z("span",{key:1,onClick:be(T=>ee(c),["stop"])},[t(d,{content:"编辑",placement:"bottom"},{default:a(()=>[t(r,{size:"16",color:"var(--el-color-primary)"},{default:a(()=>[t(k)]),_:1})]),_:1})],8,Kt)),[[y,"algorithm_catalog_update"]]),c.isDefault?ge("",!0):O((w(),z("span",{key:2,onClick:be(T=>X(c),["stop"])},[t(d,{content:"删除",placement:"bottom"},{default:a(()=>[t(r,{size:"16",color:"var(--el-color-danger)"},{default:a(()=>[t(V)]),_:1})]),_:1})],8,Bt)),[[y,"algorithm_catalog_delete"]])])):ge("",!0)])]),_:1},8,["data","props","default-expanded-keys","current-node-key"])]),_:1}),t(N,{modelValue:l.dialogVisible,"onUpdate:modelValue":m[7]||(m[7]=i=>l.dialogVisible=i),class:"center-dialog",title:(f(Xe).get(l.dialogType)||"新增")+"目录","append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,width:"500px",onOpen:H,onClosed:m[8]||(m[8]=i=>l.dialogVisible=!1)},{footer:a(()=>[o("span",Wt,[t(g,{onClick:m[6]||(m[6]=i=>l.dialogVisible=!1)},{default:a(()=>[D("取 消")]),_:1}),t(g,{type:"primary",loading:l.submiting,onClick:S},{default:a(()=>[D(" 确 定 ")]),_:1},8,["loading"])])]),default:a(()=>[o("div",zt,[t(J,{ref_key:"editForm",ref:v,class:"edit-form",inline:"",model:l.editData,rules:l.rules,"label-width":"100px","label-position":"right",onKeyup:Fe(S,["enter"])},{default:a(()=>[o("div",qt,[t(R,{label:"目录名称：",prop:"name"},{default:a(()=>[t(u,{modelValue:l.editData.name,"onUpdate:modelValue":m[3]||(m[3]=i=>l.editData.name=i),type:"text",placeholder:"请输入目录名称",maxlength:"10","show-word-limit":""},null,8,["modelValue"])]),_:1})]),o("div",Mt,[t(R,{label:"上级目录：",prop:"pid"},{default:a(()=>[t(I,{modelValue:l.editData.pid,"onUpdate:modelValue":m[4]||(m[4]=i=>l.editData.pid=i),placeholder:"请选择上级目录",style:{width:"100%"}},{default:a(()=>[(w(!0),z(pe,null,_e(Z.value,i=>(w(),P(L,{key:i.value,label:i.label,value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),o("div",jt,[t(R,{label:"描述：",prop:"description"},{default:a(()=>[t(u,{modelValue:l.editData.description,"onUpdate:modelValue":m[5]||(m[5]=i=>l.editData.description=i),type:"textarea",placeholder:"请输入描述",clearable:"",rows:6,maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1})])]),_:1},8,["model","rules"])])]),_:1},8,["modelValue","title"])])),[[B,l.isLoadingTree]])}}}),Jt=Ue(Ht,[["__scopeId","data-v-4908d2aa"]]),Gt={class:"main-content"},Qt={class:"title"},Xt=o("span",null,"注册算法",-1),Yt={class:"main","element-loading-text":"信息加载中..."},Zt={class:"card"},ea=o("div",{class:"subtitle"},"基本信息",-1),ta={class:"content-wrap"},aa={class:"form"},la={class:"item-wrap item2"},oa={class:"item-wrap"},ia={class:"item-wrap item2"},sa={class:"card"},na=o("div",{class:"subtitle"},"算法信息",-1),da={class:"content-wrap"},ra={class:"form"},ca={class:"item-wrap"},ua={class:"item-wrap"},pa={class:"name--box"},ma={class:"fileName"},fa={class:"system--box common--box"},ga=o("span",{class:"label"},"运行系统",-1),_a={class:"executor--box common--box"},va=o("span",{class:"label"},"执行器",-1),ha={class:"entryParam--box common--box"},ya=o("span",{class:"label"},"入口参数",-1),ba={class:"card"},Da=o("div",{class:"subtitle"},"版本信息",-1),Va={class:"content-wrap"},ka={class:"form"},wa={class:"item-wrap item2"},xa={class:"item-wrap"},Ca={key:0,class:"footer"},Ta=me({__name:"RegistrationDialog",props:{visible:{type:Boolean,default:!1},domId:{}},emits:["update:visible","save"],setup(le,{emit:Q}){const j=Q,U=le,v=Ce("getCatalogNode"),e=ce({isLoading:!1,submiting:!1,isUsingVersion:!0,defaultEditData:{name:"",type:null,version:"0.1",description:"",fileName:"",status:1,remark:"",executorId:"",entryParam:"",nodeType:"",systemType:3,package:"",paramConfigs:"",envsConfig:""},editData:{},rules:{name:[{required:!0,message:"算法名称不能为空",trigger:"blur"},{min:0,max:50,message:"长度在 50 个字符以内",trigger:["blur","change"]}],catalog:[{required:!0,message:"算法分类不能为空",trigger:["change"]}],type:[{required:!0,message:"所属分组不能为空",trigger:["change"]}],remark:[{min:0,max:100,message:"长度在 100 个字符以内",trigger:["blur","change"]}],version:[{required:!0,message:"版本号不能为空",trigger:["blur"]}],nodeType:[{required:!0,message:"算法类型不能为空",trigger:["change"]}],package:[{required:!0,message:"算法包不能为空，请导入",trigger:["blur"]}]},curVersionInfo:{id:"",version:""},isLoadingTable:!1,executorList:[],packageList:[],paramConfigsFile:null,envsConfigFile:null}),{classifyTreeData:K,treeProps:l,handleTypeChange:Z,currentEditData:W,catalogNameMap:F}=ke(e.editData),h=M(),_=M(),C=M(!1),x=he(()=>e.packageList.length>0);de(()=>W,r=>{e.editData.type=r.value.type},{deep:!0}),de(()=>U.visible,()=>{C.value=U.visible}),de(()=>x.value,r=>{var d;r?e.editData.package="xxx":e.editData.package="",(d=_.value)==null||d.validateField("package")});function ee(){if(e.isLoading=!0,h.value&&h.value.clearFiles(),e.packageList=[],e.paramConfigsFile=null,e.envsConfigFile=null,H(),e.editData=Y.cloneDeep(e.defaultEditData),e.isUsingVersion=!0,v!=null&&v())e.editData.type=Y.cloneDeep(v==null?void 0:v());else{const r=K.value.find(d=>d.isDefault);e.editData.type=Y.cloneDeep(r)}ue(()=>{e.isLoading=!1,setTimeout(()=>{var r;e.editData.type[l.value.label]=F.value.get(e.editData.type.id),(r=_.value)==null||r.clearValidate()},50)})}function X(){j("update:visible",!1)}function H(){e.executorList=[],Le.getExecutorPageList({rows:99999}).then(r=>{r.code==="0000"?e.executorList=r.data?r.data.records||[]:[]:re({type:"error",message:r.message||"获取执行器列表数据失败"})}).catch(r=>{re({type:"error",message:r.message||"获取执行器列表数据错误"})})}function S(r,d){var k;e.packageList=d.filter(V=>/\.zip$/i.test(V.name)),e.packageList.forEach(V=>{V.isOpen||(V.isOpen=!0),V.systemTypeList||(V.systemTypeList=[]),V.executorId||(V.executorId=""),V.entryParam||(V.entryParam="");const E=V.name.split("_");if(e.editData.nodeType===""&&E.length===3&&(e.editData.nodeType=E[1]?Number(E[1]):""),V.systemTypeList.length===0&&E.length===3){const R=E[0].split(",").map(L=>L.toLocaleLowerCase());R.includes("windows")&&V.systemTypeList.push("1"),R.includes("linux")&&V.systemTypeList.push("2")}}),e.editData.package=d.length===0?"":"fileName",(k=_.value)==null||k.validateField("package")}function p(r,d){}function m(r){var d;e.packageList=e.packageList.filter(k=>k.uid!==r.uid),e.editData.package=e.packageList.length===0?"":"fileName",(d=_.value)==null||d.validateField("package"),h.value.handleRemove(r)}function u(r){}function g(r){return new Promise((d,k)=>{r.value.validate(V=>{d(V)})})}function n(){g(_).then(d=>{d&&A()})}function A(){const{name:r,type:d,status:k,remark:V,version:E,description:R,nodeType:L}=e.editData,I={name:r,catalog:d[l.value.label],catalogId:d.id,version:E,description:R,useVersion:e.isUsingVersion,remark:V,status:k,nodeType:L},J=e.packageList.map(y=>({name:y.name,systemType:y.systemTypeList.join(","),executorId:y.executorId,entryParam:y.entryParam}));I.fileInfos=JSON.stringify(J),I.files=[];for(let y=0;y<e.packageList.length;y++)I.files.push(e.packageList[y].raw);const N=new FormData;for(const y in I)if(y==="files")for(let B=0;B<I[y].length;B++)N.append("files",I[y][B]);else N.append(y,I[y]);e.submiting=!0,te.registerAlgorithm(N).then(y=>{e.submiting=!1,y.code==="0000"?(q({type:"success",title:"注册算法成功"}),X(),j("save")):q({type:"error",title:"注册算法失败",message:y.message})}).catch(y=>{e.submiting=!1,q({type:"error",title:"注册算法失败",message:y.message})})}return(r,d)=>{const k=s("ArrowLeft"),V=s("el-icon"),E=s("el-divider"),R=s("el-input"),L=s("el-form-item"),I=s("el-switch"),J=s("el-radio-button"),N=s("el-radio-group"),y=s("el-button"),B=s("el-upload"),i=s("ArrowUp"),c=s("ArrowDown"),T=s("Document"),oe=s("Delete"),fe=s("el-checkbox"),ye=s("el-checkbox-group"),ne=s("el-option"),$=s("el-select"),ie=s("el-form"),Se=ve("loading");return w(),P(f($e),{id:"registration-full-dialog",modelValue:C.value,"onUpdate:modelValue":d[9]||(d[9]=b=>C.value=b),class:"full-dialog common-full-dialog","append-to-dom":r.domId,"modal-append-to-body":!1,fullscreen:"","is-custom":"","close-on-press-escape":!1,onOpen:ee,onClosed:X},{default:a(()=>[o("div",Gt,[o("div",Qt,[t(V,{onClick:X},{default:a(()=>[t(k)]),_:1}),t(E,{direction:"vertical"}),Xt]),O((w(),z("div",Yt,[t(ie,{ref_key:"editFormRef",ref:_,class:"edit-form",inline:"",model:e.editData,rules:e.rules,"label-width":"auto","label-position":"right"},{default:a(()=>[o("div",Zt,[ea,o("div",ta,[o("div",aa,[o("div",la,[t(L,{label:"算法名称",prop:"name"},{default:a(()=>[t(R,{modelValue:e.editData.name,"onUpdate:modelValue":d[0]||(d[0]=b=>e.editData.name=b),type:"text",placeholder:"请输入算法名称",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(L,{key:"editData.type",label:"所属分组",prop:"type"},{default:a(()=>[t(f(Ye),{modelValue:e.editData.type,"onUpdate:modelValue":d[1]||(d[1]=b=>e.editData.type=b),"tree-props":f(l),"tree-data":f(K),"node-key":"id",icon:"iconCls",style:{width:"100%"},"expand-on-click-node":!1,"default-expand-all":"",clearable:"",filterable:"",onChange:f(Z)},null,8,["modelValue","tree-props","tree-data","onChange"])]),_:1})]),o("div",oa,[t(L,{label:"算法说明",prop:"remark"},{default:a(()=>[t(R,{modelValue:e.editData.remark,"onUpdate:modelValue":d[2]||(d[2]=b=>e.editData.remark=b),type:"text",placeholder:"请输入算法说明",clearable:"",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1})]),o("div",ia,[t(L,{label:"发布状态",prop:"status"},{default:a(()=>[t(I,{modelValue:e.editData.status,"onUpdate:modelValue":d[3]||(d[3]=b=>e.editData.status=b),class:"swith-btn","active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),t(L)])])])]),o("div",sa,[na,o("div",da,[o("div",ra,[o("div",ca,[t(L,{label:"算法类型",prop:"nodeType"},{default:a(()=>[t(N,{modelValue:e.editData.nodeType,"onUpdate:modelValue":d[4]||(d[4]=b=>e.editData.nodeType=b)},{default:a(()=>[t(J,{label:0},{default:a(()=>[D("普通计算")]),_:1}),t(J,{label:1},{default:a(()=>[D("分组计算")]),_:1}),t(J,{label:2},{default:a(()=>[D("收集计算")]),_:1}),t(J,{label:3},{default:a(()=>[D("重分配计算")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),o("div",ua,[t(L,{label:"算法包",prop:"package"},{default:a(()=>[t(B,{ref_key:"uploadRef",ref:h,class:"upload-demo",action:"fakeaction",multiple:"",accept:".zip","on-change":S,"on-remove":p,"file-list":e.packageList,"auto-upload":!1,"show-file-list":!1,"http-request":u},{trigger:a(()=>[t(y,{type:"primary",plain:"",icon:f(Pe)},{default:a(()=>[D("导入算法包")]),_:1},8,["icon"])]),_:1},8,["file-list"]),(w(!0),z(pe,null,_e(e.packageList,b=>(w(),z("div",{key:b.uid,class:"package-container"},[o("div",pa,[t(V,{title:b.isOpen?"点击收起":"点击展开",onClick:ae=>b.isOpen=!b.isOpen},{default:a(()=>[b.isOpen?(w(),P(i,{key:0})):(w(),P(c,{key:1}))]),_:2},1032,["title","onClick"]),o("span",ma,[t(V,null,{default:a(()=>[t(T)]),_:1}),D(" "+se(b.name),1)]),t(V,{class:"delete",title:"移除",onClick:ae=>m(b)},{default:a(()=>[t(oe)]),_:2},1032,["onClick"])]),O(o("div",fa,[ga,t(ye,{modelValue:b.systemTypeList,"onUpdate:modelValue":ae=>b.systemTypeList=ae},{default:a(()=>[t(fe,{label:"1"},{default:a(()=>[D("windows")]),_:1}),t(fe,{label:"2"},{default:a(()=>[D("linux")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])],512),[[De,b.isOpen]]),O(o("div",_a,[va,t($,{modelValue:b.executorId,"onUpdate:modelValue":ae=>b.executorId=ae,clearable:"",placeholder:"请选择"},{default:a(()=>[(w(!0),z(pe,null,_e(e.executorList,ae=>(w(),P(ne,{key:ae.id,label:ae.name,value:ae.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])],512),[[De,b.isOpen]]),O(o("div",ha,[ya,t(R,{modelValue:b.entryParam,"onUpdate:modelValue":ae=>b.entryParam=ae,type:"text",placeholder:"为空时将自动获取执行器对应的入口参数",maxlength:"100","show-word-limit":"",style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue"])],512),[[De,b.isOpen]])]))),128))]),_:1})])])])]),o("div",ba,[Da,o("div",Va,[o("div",ka,[o("div",wa,[t(L,{label:"版本号",prop:"version"},{default:a(()=>[t(R,{modelValue:e.editData.version,"onUpdate:modelValue":d[5]||(d[5]=b=>e.editData.version=b),class:"mr",type:"text",placeholder:"请输入版本号",style:{flex:"1"},maxlength:"20","show-word-limit":""},{prepend:a(()=>[D("V")]),_:1},8,["modelValue"]),t(fe,{modelValue:e.isUsingVersion,"onUpdate:modelValue":d[6]||(d[6]=b=>e.isUsingVersion=b),disabled:""},{default:a(()=>[D("使用此版本")]),_:1},8,["modelValue"])]),_:1}),t(L)]),o("div",xa,[t(L,{label:"版本说明",prop:"description"},{default:a(()=>[t(R,{modelValue:e.editData.description,"onUpdate:modelValue":d[7]||(d[7]=b=>e.editData.description=b),type:"text",placeholder:"请输入版本说明",clearable:"",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1})])])])])]),_:1},8,["model","rules"])])),[[Se,e.isLoading]]),e.isLoading?ge("",!0):(w(),z("div",Ca,[t(y,{onClick:d[8]||(d[8]=b=>C.value=!1)},{default:a(()=>[D("取消")]),_:1}),t(y,{type:"primary",loading:e.submiting,onClick:n},{default:a(()=>[D("保存")]),_:1},8,["loading"])]))])]),_:1},8,["modelValue","append-to-dom"])}}}),$a={class:"algorithm-source-choose"},La={class:"item-wrap"},Aa={class:"dialog-footer"},Ua=me({__name:"MoveDataDialog",props:{visible:{type:Boolean,default:!1},resourceIds:{default:()=>[]}},emits:["update:visible","save"],setup(le,{emit:Q}){const j=le,U=Q,v=M(),e=ce({dialogVisible:!1,submiting:!1,form:{type:null},rules:{type:[{required:!0,message:"所属分组不能为空",trigger:["change"]}]}}),{classifyTreeData:K,treeProps:l}=ke(e.form);de(()=>j.visible,h=>{e.dialogVisible=h});function Z(){e.form.type=null,ue(()=>{setTimeout(()=>{var h;(h=v.value)==null||h.clearValidate()},50)})}function W(){U("update:visible",!1)}function F(){v.value.validate(h=>{if(h){const _={catalog:e.form.type[l.value.label],catalogId:e.form.type.id,ids:j.resourceIds.join(",")};e.submiting=!0,te.moveDataByCatalogId(_).then(C=>{e.submiting=!1,C.code==="0000"?(q({type:"success",title:"批量移动成功"}),W(),U("save")):q({type:"error",title:"批量移动失败",message:C.message})}).catch(C=>{e.submiting=!1,q({type:"error",title:"批量移动失败",message:C.message})})}})}return(h,_)=>{const C=s("el-form-item"),x=s("el-form"),ee=s("el-button"),X=s("el-dialog");return w(),P(X,{modelValue:e.dialogVisible,"onUpdate:modelValue":_[2]||(_[2]=H=>e.dialogVisible=H),class:"center-dialog",title:"批量移动","append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,width:"500px",onOpen:Z,onClosed:W},{footer:a(()=>[o("span",Aa,[t(ee,{onClick:_[1]||(_[1]=H=>e.dialogVisible=!1)},{default:a(()=>[D("取 消")]),_:1}),t(ee,{type:"primary",loading:e.submiting,onClick:F},{default:a(()=>[D("确 定")]),_:1},8,["loading"])])]),default:a(()=>[o("div",$a,[t(x,{ref_key:"formRef",ref:v,class:"edit-form",inline:"",model:e.form,rules:e.rules,"label-width":"120px","label-position":"right"},{default:a(()=>[o("div",La,[t(C,{label:"所属分组：",prop:"type"},{default:a(()=>[t(f(Ae),{modelValue:e.form.type,"onUpdate:modelValue":_[0]||(_[0]=H=>e.form.type=H),"tree-props":f(l),"tree-data":f(K),style:{width:"100%"}},null,8,["modelValue","tree-props","tree-data"])]),_:1})])]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"])}}}),Sa={class:"download-version"},Ea={class:"top"},Ra={class:"table center"},Ia=["title"],Na={class:"dialog-footer"},Fa=me({__name:"VersionDownloadDialog",props:{visible:{type:Boolean,default:!1},algorithmId:{default:""}},emits:["update:visible","save"],setup(le,{emit:Q}){const j=Q,U=le,v=ce({dialogVisible:!1,isLoadingTable:!1,versionList:[],curVersionId:""});de(()=>U.visible,h=>{v.dialogVisible=h});function e(){v.isLoadingTable=!0,l(U.algorithmId)}function K(){j("update:visible",!1),v.versionList=[]}function l(h){te.getAlgorithmInfo(h).then(_=>{var C,x;_.code==="0000"?(v.versionList=((C=_==null?void 0:_.data)==null?void 0:C.versions)||[],v.curVersionId=(x=_==null?void 0:_.data)==null?void 0:x.versionId):re({type:"error",message:"获取版本列表失败"})}).catch(()=>{re({type:"error",message:"获取版本列表错误"})}).finally(()=>{v.isLoadingTable=!1})}function Z(h){F(h.id,h.version)}function W(){for(let h=0,_=v.versionList.length;h<_;h++){const{id:C,version:x}=v.versionList[h];F(C,x)}}function F(h,_){te.downloadAlgorithmFile(h).then(C=>{const{data:x}=C;at(x.data,x.fileName)}).catch(()=>{re({type:"error",message:`下载${_}错误`})})}return(h,_)=>{const C=s("el-button"),x=s("el-table-column"),ee=s("el-table"),X=s("el-dialog"),H=ve("loading");return w(),P(X,{modelValue:v.dialogVisible,"onUpdate:modelValue":_[1]||(_[1]=S=>v.dialogVisible=S),class:"center-dialog body-none-padding",title:"下载","append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,width:"900px",onOpen:e,onClosed:K},{footer:a(()=>[o("span",Na,[t(C,{type:"primary",onClick:_[0]||(_[0]=S=>v.dialogVisible=!1)},{default:a(()=>[D("关 闭")]),_:1})])]),default:a(()=>[o("div",Sa,[o("div",Ea,[t(C,{type:"primary",text:"",onClick:W},{default:a(()=>[D("全部下载")]),_:1})]),o("div",Ra,[O((w(),P(ee,{"element-loading-text":"获取版本中...",style:{width:"100%"},data:v.versionList,"max-height":600,"row-key":"id",border:!1},{default:a(()=>[t(x,{align:"center",prop:"version",label:"版本号",width:"300"},{default:a(S=>[o("span",{class:Oe(["version-info",S.row.id===v.curVersionId?"cur":""])},se("v"+S.row.version)+se(S.row.id===v.curVersionId?"（当前版本）":""),3)]),_:1}),t(x,{align:"center",prop:"name",label:"算法包"},{default:a(S=>[o("span",{title:S.row.name},se(S.row.name),9,Ia)]),_:1}),t(x,{width:"100px",label:"操作",align:"center",fixed:"right","class-name":"tableOperate"},{default:a(S=>[t(C,{type:"primary",text:"",onClick:p=>Z(S.row)},{default:a(()=>[D("下载")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[H,v.isLoadingTable]])])])]),_:1},8,["modelValue"])}}});function Pa(){const Q=ce({searchOptions:[{label:"关键字",key:"keyword",type:"text",placeholder:"算法名称",span:6},{label:"算法状态",key:"status",type:"select",options:[{label:"所有",value:""},{label:"启动",value:1},{label:"禁用",value:0}],clearable:!0,span:5}],columns:[{prop:"name",label:"算法名称",minWidth:120,slot:"name"},{prop:"catalog",label:"所属分组",minWidth:120},{prop:"version",label:"当前版本",minWidth:120,slot:"version"},{prop:"remark",label:"算法描述",minWidth:120},{prop:"updateTime",label:"更新时间",minWidth:120},{prop:"createTime",label:"创建时间",minWidth:120},{prop:"status",label:"发布状态",minWidth:80,slot:"status"}]});return{...Ke(Q)}}const Oa=me({__name:"index",setup(le){const{searchOptions:Q,columns:j}=Pa(),U=M(),v=M(),e=M("algorithemanage"),K=M(),l=he(()=>{var c;return(c=K.value)==null?void 0:c.$el}),Z={catalogId:"#"},{data:W,total:F,pageNo:h,pageSize:_,multipleSelection:C,loading:x,handleSizeChange:ee,handleCurrentChange:X,handleSelectionChange:H,handleSearch:S,initData:p}=Me(te.getAlgorithmPageList,Z),m=he(()=>C.value.map(c=>c.id)),u=ce({classifyTreeData:[],dialogVisible:!1,dialogType:G.CHECK,curEditData:{},addVersionDialogVisible:!1,addVersionData:{},registerDialogVisible:!1,batchRegisterDialogVisible:!1,moveDataDialogVisible:!1,downloadDialogVisible:!1,downloadId:""});we("getClassifyTreeData",n),we("getCatalogNode",A),Te(()=>{p()}),Be(()=>{});function g(c){return c?`v${c}`:"--"}function n(){const c=Y.cloneDeep(u.classifyTreeData);return!c||c.length===0?[]:c}function A(){var c,T;return((T=(c=v.value)==null?void 0:c.treeRef)==null?void 0:T.getCurrentNode())||null}function r(c){Z.catalogId=c,p()}function d(c){u.classifyTreeData=c}function k(){u.batchRegisterDialogVisible=!0}function V(){u.registerDialogVisible=!0}function E(c,T){W.value.length!==0&&te.changeAlgorithmStatus(T.id,T.status).then(()=>{p()}).catch(()=>{p()})}function R(c){u.curEditData=Y.cloneDeep(c),u.dialogType=G.CHECK,u.dialogVisible=!0}function L(c){u.addVersionData=Y.cloneDeep(c),u.addVersionDialogVisible=!0}function I(c){u.curEditData=Y.cloneDeep(c),u.dialogType=G.EDIT,u.dialogVisible=!0}function J(c){u.downloadId=c.id,u.downloadDialogVisible=!0}function N(){u.dialogType=G.EDIT}function y(c){Ve.confirm(`删除【${c.name}】算法将一并删除所有的版本记录，是否继续?`,"提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning",draggable:!0}).then(()=>{x.value=!0,te.deleteAlgorithm(c.id).then(T=>{x.value=!1,T.code==="0000"&&p()}).catch(()=>{x.value=!1})})}function B(){Ve.confirm("是否批量删除选中算法? 删除算法将一并删除所有的版本记录","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",draggable:!0}).then(()=>{x.value=!0;const c=m.value.join(",");te.deleteAlgorithm(c).then(T=>{x.value=!1,T.code==="0000"&&p()}).catch(()=>{x.value=!1})}).catch(()=>{})}function i(){u.moveDataDialogVisible=!0}return(c,T)=>{const oe=s("el-button"),fe=s("el-link"),ye=s("el-switch"),ne=ve("action");return w(),z(pe,null,[t(f(xe),{id:"algorithemanage",background:""},{default:a(()=>[t(f(je),{ref_key:"asideRef",ref:K,padding:""},{default:a(()=>[t(Jt,{ref_key:"catalogTreeRef",ref:v,onChange:r,onSetData:d},null,512)]),_:1},512),t(f(xe),{id:"algorithm-setting"},{default:a(()=>[t(f(We),{target:l.value},null,8,["target"]),t(f(He),{padding:"1 1 0",border:""},{default:a(()=>[t(f(Je),{ref_key:"SmartSearchRef",ref:U,options:f(Q),onHandleSearch:f(S)},null,8,["options","onHandleSearch"])]),_:1}),t(f(Ge),null,{default:a(()=>[t(f(Qe),{ref:"baseTable","operation-width":"240",columns:f(j),"table-data":f(W),"current-page":f(h),"page-size":f(_),total:f(F),"pagination-is-need":!0,"operation-is-need":!0,loading:f(x),"search-form-ref":U.value,"selection-is-need":!0,"index-is-need":!1,onSizeChange:f(ee),onCurrentChange:f(X),onSelectionChange:f(H)},{"smart-table_operation":a(()=>[t(oe,{type:"primary",onClick:k},{default:a(()=>[D(" 批量注册 ")]),_:1}),t(oe,{type:"primary",onClick:V},{default:a(()=>[D(" 注册算法 ")]),_:1})]),"smart-table_batch-operation":a(()=>[O((w(),P(oe,{link:"",type:"primary",icon:f(ze),onClick:i},{default:a(()=>[D(" 批量移动 ")]),_:1},8,["icon"])),[[ne,"algorithm_algorithm_changeCatalog"]]),O((w(),P(oe,{link:"",icon:f(qe),type:"danger",onClick:B},{default:a(()=>[D(" 批量删除 ")]),_:1},8,["icon"])),[[ne,"algorithm_algorithm_delete"]])]),name:a(({scope:$})=>[t(fe,{type:"primary",onClick:ie=>R($.row)},{default:a(()=>[D(se($.row.name),1)]),_:2},1032,["onClick"])]),version:a(({scope:$})=>[D(se(g($.row.version)),1)]),status:a(({scope:$})=>[t(ye,{modelValue:$.row.status,"onUpdate:modelValue":ie=>$.row.status=ie,class:"swith-btn","active-value":1,"inactive-value":0,onChange:ie=>E(ie,$.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),operation:a(({scope:$})=>[O((w(),P(oe,{link:"",type:"primary",onClick:ie=>L($.row)},{default:a(()=>[D(" 添加版本 ")]),_:2},1032,["onClick"])),[[ne,"algorithm_version_add"]]),O((w(),P(oe,{link:"",type:"primary",onClick:ie=>I($.row)},{default:a(()=>[D(" 编辑 ")]),_:2},1032,["onClick"])),[[ne,"algorithm_algorithm_update"]]),O((w(),P(oe,{link:"",type:"primary",onClick:ie=>J($.row)},{default:a(()=>[D(" 下载 ")]),_:2},1032,["onClick"])),[[ne,"algorithm_algorithm_download"]]),O((w(),P(oe,{link:"",type:"danger",onClick:ie=>y($.row)},{default:a(()=>[D(" 删除 ")]),_:2},1032,["onClick"])),[[ne,"algorithm_algorithm_delete"]])]),_:1},8,["columns","table-data","current-page","page-size","total","loading","search-form-ref","onSizeChange","onCurrentChange","onSelectionChange"])]),_:1})]),_:1})]),_:1}),t(Ze,{visible:u.addVersionDialogVisible,"onUpdate:visible":T[0]||(T[0]=$=>u.addVersionDialogVisible=$),"cur-item":u.addVersionData,onSave:f(p)},null,8,["visible","cur-item","onSave"]),t(St,{visible:u.batchRegisterDialogVisible,"onUpdate:visible":T[1]||(T[1]=$=>u.batchRegisterDialogVisible=$),"dom-id":e.value,onSave:f(p)},null,8,["visible","dom-id","onSave"]),t(Ta,{visible:u.registerDialogVisible,"onUpdate:visible":T[2]||(T[2]=$=>u.registerDialogVisible=$),"dom-id":e.value,onSave:f(p)},null,8,["visible","dom-id","onSave"]),t(Ua,{visible:u.moveDataDialogVisible,"onUpdate:visible":T[3]||(T[3]=$=>u.moveDataDialogVisible=$),"resource-ids":m.value,onSave:f(p)},null,8,["visible","resource-ids","onSave"]),t(Fa,{visible:u.downloadDialogVisible,"onUpdate:visible":T[4]||(T[4]=$=>u.downloadDialogVisible=$),"algorithm-id":u.downloadId},null,8,["visible","algorithm-id"]),t(et,{visible:u.dialogVisible,"onUpdate:visible":T[5]||(T[5]=$=>u.dialogVisible=$),"dom-id":e.value,"dialog-type":u.dialogType,"cur-edit-data":u.curEditData,onSave:f(p),onChangeEdit:N},null,8,["visible","dom-id","dialog-type","cur-edit-data","onSave"])],64)}}}),Ka=Ue(Oa,[["__scopeId","data-v-7b7c1886"]]),Ya=Ka;export{Ya as default};
