import{d as K,o as x,f as k,g as z,c as I,C as ee,W as wr,a8 as ie,a9 as Cr,M as Ar,a6 as Tt,w as Q,H as Lr,aa as Or,ab as Xe,b as O,n as Re,N as Ue,ac as gt,e as J,t as ze,x as yt,j as H,k as se,v as fe,U as Se,Q as He,ad as Rr,B as le,X as Dr,z as he,ae as Ae,af as Fr,ag as xr,ah as bt,q as Pr,T as Ut,S as $r,l as we,i as Ye,F as Nt,y as zt,L as It,p as kr}from"./element-plus.59ccb443.js";import{q as Tr,_ as Ur}from"./lodash.22f463b4.js";const oe=e=>{const t=e;return t.install=function(r){r.component(t.displayName||t.name,e)},t};var Ve=(e,t)=>{const r=e.__vccOpts||e;for(const[n,s]of t)r[n]=s;return r};const Nr=K({name:"Close"}),zr={width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},Ir=z("path",{d:"M7.99998 7.20508L2.49998 1.70508L1.79288 2.41218L7.29288 7.91219L1.79288 13.4122L2.49999 14.1193L7.99998 8.61929L13.5 14.1193L14.2071 13.4122L8.70709 7.91219L14.2071 2.41218L13.5 1.70508L7.99998 7.20508Z",fill:"currentColor"},null,-1),Mr=[Ir];function Br(e,t,r,n,s,a){return x(),k("svg",zr,Mr)}var Mt=Ve(Nr,[["render",Br]]);const jr=K({name:"PauseFill"}),Hr={width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},Wr=z("path",{d:"M4 2.5H6V13.5H4V2.5Z",fill:"currentColor"},null,-1),Yr=z("path",{d:"M10 2.5H12V13.5H10V2.5Z",fill:"currentColor"},null,-1),Vr=[Wr,Yr];function qr(e,t,r,n,s,a){return x(),k("svg",Hr,Vr)}var Gr=Ve(jr,[["render",qr]]);const Xr=K({name:"Play"}),Zr={width:"16",height:"17",viewBox:"0 0 16 17",xmlns:"http://www.w3.org/2000/svg"},Kr=z("path",{d:"M5.35948 1.63604L12.2234 8.5L5.35948 15.364L5.35948 1.63604ZM6.35948 4.05025L6.35948 12.9497L10.8092 8.5L6.35948 4.05025Z",fill:"currentColor"},null,-1),Jr=[Kr];function Qr(e,t,r,n,s,a){return x(),k("svg",Zr,Jr)}var en=Ve(Xr,[["render",Qr]]);const tn=K({name:"Refresh"}),rn={width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},nn=z("path",{d:"M10.9875 4.00008L8.28041 1.29297L7.5733 2.00008L9.07323 3.5H8C4.96243 3.5 2.5 5.96243 2.5 9C2.5 12.0376 4.96243 14.5 8 14.5C11.0376 14.5 13.5 12.0376 13.5 9V8.5H12.5V9C12.5 11.4853 10.4853 13.5 8 13.5C5.51472 13.5 3.5 11.4853 3.5 9C3.5 6.51472 5.51472 4.5 8 4.5H9.07338L7.5733 6.00008L8.28041 6.70718L10.9875 4.00008Z",fill:"currentColor"},null,-1),sn=[nn];function on(e,t,r,n,s,a){return x(),k("svg",rn,sn)}var an=Ve(tn,[["render",on]]);const lt=e=>typeof e=="number",un=e=>typeof e=="string",Bt={size:{type:[Number,String]},color:{type:String}};var ae=(e,t)=>{const r=e.__vccOpts||e;for(const[n,s]of t)r[n]=s;return r};const ln=K({name:"SuIcon",inheritAttrs:!1,props:Bt,setup(e){return{style:I(()=>{if(!e.size&&!e.color)return{};let{size:t}=e;return(lt(t)||un(t)&&!t.endsWith("px"))&&(t=`${t}px`),{...e.size?{fontSize:t}:{},...e.color?{"--color":e.color}:{}}})}}});function fn(e,t,r,n,s,a){return x(),k("i",wr({class:"su-icon",style:e.style},e.$attrs),[ee(e.$slots,"default")],16)}var cn=ae(ln,[["render",fn],["__file","/builds/front-end/SmartUI/smart-ui/src/icon/icon.vue"]]);const ft=oe(cn),jt="update:modelValue";function _t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ht(e,t,r){return t&&_t(e.prototype,t),r&&_t(e,r),e}function Be(){return(Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Wt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Yt(e,t){if(e==null)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)t.indexOf(r=a[n])>=0||(s[r]=e[r]);return s}function Et(e){return((t=e)!=null&&typeof t=="object"&&Array.isArray(t)===!1)==1&&Object.prototype.toString.call(e)==="[object Object]";var t}var Vt=Object.prototype,qt=Vt.toString,dn=Vt.hasOwnProperty,Gt=/^\s*function (\w+)/;function St(e){var t,r=(t=e==null?void 0:e.type)!==null&&t!==void 0?t:e;if(r){var n=r.toString().match(Gt);return n?n[1]:""}return""}var me=function(e){var t,r;return Et(e)!==!1&&typeof(t=e.constructor)=="function"&&Et(r=t.prototype)!==!1&&r.hasOwnProperty("isPrototypeOf")!==!1},hn=function(e){return e},Y=hn,Te=function(e,t){return dn.call(e,t)},pn=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e},Le=Array.isArray||function(e){return qt.call(e)==="[object Array]"},Oe=function(e){return qt.call(e)==="[object Function]"},We=function(e){return me(e)&&Te(e,"_vueTypes_name")},Xt=function(e){return me(e)&&(Te(e,"type")||["_vueTypes_name","validator","default","required"].some(function(t){return Te(e,t)}))};function ct(e,t){return Object.defineProperty(e.bind(t),"__original",{value:e})}function ge(e,t,r){var n;r===void 0&&(r=!1);var s=!0,a="";n=me(e)?e:{type:e};var c=We(n)?n._vueTypes_name+" - ":"";if(Xt(n)&&n.type!==null){if(n.type===void 0||n.type===!0||!n.required&&t===void 0)return s;Le(n.type)?(s=n.type.some(function(m){return ge(m,t,!0)===!0}),a=n.type.map(function(m){return St(m)}).join(" or ")):s=(a=St(n))==="Array"?Le(t):a==="Object"?me(t):a==="String"||a==="Number"||a==="Boolean"||a==="Function"?function(m){if(m==null)return"";var b=m.constructor.toString().match(Gt);return b?b[1]:""}(t)===a:t instanceof n.type}if(!s){var d=c+'value "'+t+'" should be of type "'+a+'"';return r===!1?(Y(d),!1):d}if(Te(n,"validator")&&Oe(n.validator)){var v=Y,g=[];if(Y=function(m){g.push(m)},s=n.validator(t),Y=v,!s){var p=(g.length>1?"* ":"")+g.join(`
* `);return g.length=0,r===!1?(Y(p),s):p}}return s}function Z(e,t){var r=Object.defineProperties(t,{_vueTypes_name:{value:e,writable:!0},isRequired:{get:function(){return this.required=!0,this}},def:{value:function(s){return s!==void 0||this.default?Oe(s)||ge(this,s,!0)===!0?(this.default=Le(s)?function(){return[].concat(s)}:me(s)?function(){return Object.assign({},s)}:s,this):(Y(this._vueTypes_name+' - invalid default value: "'+s+'"'),this):this}}}),n=r.validator;return Oe(n)&&(r.validator=ct(n,r)),r}function ne(e,t){var r=Z(e,t);return Object.defineProperty(r,"validate",{value:function(n){return Oe(this.validator)&&Y(this._vueTypes_name+` - calling .validate() will overwrite the current custom validator function. Validator info:
`+JSON.stringify(this)),this.validator=ct(n,this),this}})}function wt(e,t,r){var n,s,a=(n=t,s={},Object.getOwnPropertyNames(n).forEach(function(m){s[m]=Object.getOwnPropertyDescriptor(n,m)}),Object.defineProperties({},s));if(a._vueTypes_name=e,!me(r))return a;var c,d,v=r.validator,g=Yt(r,["validator"]);if(Oe(v)){var p=a.validator;p&&(p=(d=(c=p).__original)!==null&&d!==void 0?d:c),a.validator=ct(p?function(m){return p.call(this,m)&&v.call(this,m)}:v,a)}return Object.assign(a,g)}function qe(e){return e.replace(/^(?!\s*$)/gm,"  ")}var vn=function(){return ne("any",{})},mn=function(){return ne("function",{type:Function})},gn=function(){return ne("boolean",{type:Boolean})},yn=function(){return ne("string",{type:String})},bn=function(){return ne("number",{type:Number})},_n=function(){return ne("array",{type:Array})},En=function(){return ne("object",{type:Object})},Sn=function(){return Z("integer",{type:Number,validator:function(e){return pn(e)}})},wn=function(){return Z("symbol",{validator:function(e){return typeof e=="symbol"}})};function Cn(e,t){if(t===void 0&&(t="custom validation failed"),typeof e!="function")throw new TypeError("[VueTypes error]: You must provide a function as argument");return Z(e.name||"<<anonymous function>>",{validator:function(r){var n=e(r);return n||Y(this._vueTypes_name+" - "+t),n}})}function An(e){if(!Le(e))throw new TypeError("[VueTypes error]: You must provide an array as argument.");var t='oneOf - value should be one of "'+e.join('", "')+'".',r=e.reduce(function(n,s){if(s!=null){var a=s.constructor;n.indexOf(a)===-1&&n.push(a)}return n},[]);return Z("oneOf",{type:r.length>0?r:void 0,validator:function(n){var s=e.indexOf(n)!==-1;return s||Y(t),s}})}function Ln(e){if(!Le(e))throw new TypeError("[VueTypes error]: You must provide an array as argument");for(var t=!1,r=[],n=0;n<e.length;n+=1){var s=e[n];if(Xt(s)){if(We(s)&&s._vueTypes_name==="oneOf"){r=r.concat(s.type);continue}if(Oe(s.validator)&&(t=!0),s.type!==!0&&s.type){r=r.concat(s.type);continue}}r.push(s)}return r=r.filter(function(a,c){return r.indexOf(a)===c}),Z("oneOfType",t?{type:r,validator:function(a){var c=[],d=e.some(function(v){var g=ge(We(v)&&v._vueTypes_name==="oneOf"?v.type||null:v,a,!0);return typeof g=="string"&&c.push(g),g===!0});return d||Y("oneOfType - provided value does not match any of the "+c.length+` passed-in validators:
`+qe(c.join(`
`))),d}}:{type:r})}function On(e){return Z("arrayOf",{type:Array,validator:function(t){var r,n=t.every(function(s){return(r=ge(e,s,!0))===!0});return n||Y(`arrayOf - value validation error:
`+qe(r)),n}})}function Rn(e){return Z("instanceOf",{type:e})}function Dn(e){return Z("objectOf",{type:Object,validator:function(t){var r,n=Object.keys(t).every(function(s){return(r=ge(e,t[s],!0))===!0});return n||Y(`objectOf - value validation error:
`+qe(r)),n}})}function Fn(e){var t=Object.keys(e),r=t.filter(function(s){var a;return!!(!((a=e[s])===null||a===void 0)&&a.required)}),n=Z("shape",{type:Object,validator:function(s){var a=this;if(!me(s))return!1;var c=Object.keys(s);if(r.length>0&&r.some(function(v){return c.indexOf(v)===-1})){var d=r.filter(function(v){return c.indexOf(v)===-1});return Y(d.length===1?'shape - required property "'+d[0]+'" is not defined.':'shape - required properties "'+d.join('", "')+'" are not defined.'),!1}return c.every(function(v){if(t.indexOf(v)===-1)return a._vueTypes_isLoose===!0||(Y('shape - shape definition does not include a "'+v+'" property. Allowed keys: "'+t.join('", "')+'".'),!1);var g=ge(e[v],s[v],!0);return typeof g=="string"&&Y('shape - "'+v+`" property validation error:
 `+qe(g)),g===!0})}});return Object.defineProperty(n,"_vueTypes_isLoose",{writable:!0,value:!1}),Object.defineProperty(n,"loose",{get:function(){return this._vueTypes_isLoose=!0,this}}),n}var re=function(){function e(){}return e.extend=function(t){var r=this;if(Le(t))return t.forEach(function(m){return r.extend(m)}),this;var n=t.name,s=t.validate,a=s!==void 0&&s,c=t.getter,d=c!==void 0&&c,v=Yt(t,["name","validate","getter"]);if(Te(this,n))throw new TypeError('[VueTypes error]: Type "'+n+'" already defined');var g,p=v.type;return We(p)?(delete v.type,Object.defineProperty(this,n,d?{get:function(){return wt(n,p,v)}}:{value:function(){var m,b=wt(n,p,v);return b.validator&&(b.validator=(m=b.validator).bind.apply(m,[b].concat([].slice.call(arguments)))),b}})):(g=d?{get:function(){var m=Object.assign({},v);return a?ne(n,m):Z(n,m)},enumerable:!0}:{value:function(){var m,b,E=Object.assign({},v);return m=a?ne(n,E):Z(n,E),E.validator&&(m.validator=(b=E.validator).bind.apply(b,[m].concat([].slice.call(arguments)))),m},enumerable:!0},Object.defineProperty(this,n,g))},Ht(e,null,[{key:"any",get:function(){return vn()}},{key:"func",get:function(){return mn().def(this.defaults.func)}},{key:"bool",get:function(){return gn().def(this.defaults.bool)}},{key:"string",get:function(){return yn().def(this.defaults.string)}},{key:"number",get:function(){return bn().def(this.defaults.number)}},{key:"array",get:function(){return _n().def(this.defaults.array)}},{key:"object",get:function(){return En().def(this.defaults.object)}},{key:"integer",get:function(){return Sn().def(this.defaults.integer)}},{key:"symbol",get:function(){return wn()}}]),e}();function Zt(e){var t;return e===void 0&&(e={func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0}),(t=function(r){function n(){return r.apply(this,arguments)||this}return Wt(n,r),Ht(n,null,[{key:"sensibleDefaults",get:function(){return Be({},this.defaults)},set:function(s){this.defaults=s!==!1?Be({},s!==!0?s:e):{}}}]),n}(re)).defaults=Be({},e),t}re.defaults={},re.custom=Cn,re.oneOf=An,re.instanceOf=Rn,re.oneOfType=Ln,re.arrayOf=On,re.objectOf=Dn,re.shape=Fn,re.utils={validate:function(e,t){return ge(t,e,!0)===!0},toType:function(e,t,r){return r===void 0&&(r=!1),r?ne(e,t):Z(e,t)}};(function(e){function t(){return e.apply(this,arguments)||this}return Wt(t,e),t})(Zt());const U=Zt({func:void 0,bool:void 0,string:void 0,number:void 0,array:void 0,object:void 0,integer:void 0});U.extend([{name:"looseBool",getter:!0,type:Boolean,default:void 0},{name:"style",getter:!0,type:[String,Object],default:void 0},{name:"VNodeChild",getter:!0,type:void 0}]);const xn=e=>lt(e)?!0:["px","rem","em","vw","%","vmin","vmax"].some(t=>e.endsWith(t))||e.startsWith("calc"),Kt={appendToBody:U.bool.def(!1),beforeClose:U.func,destroyOnClose:U.bool.def(!1),center:U.bool.def(!1),customClass:U.string,closeIcon:[String,Object],closeOnClickModal:U.bool.def(!0),closeOnPressEscape:U.bool.def(!0),fullscreen:U.bool.def(!1),lockScroll:U.bool.def(!0),modal:U.bool.def(!0),showClose:U.bool.def(!0),title:U.string,openDelay:U.number.def(0),closeDelay:U.number.def(0),top:U.string,modelValue:{type:Boolean,required:!0},modalClass:U.string,width:{type:[String,Number],validator:xn},zIndex:U.number,left:U.string,right:U.string,drag:U.string.def("disabled"),dragValue:U.object,resize:U.string.def("disabled"),resizeValue:U.object},Jt={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[jt]:e=>typeof e=="boolean"},Qe=function(e){return(e||"").split(" ").filter(t=>!!t.trim())},et=function(e,t,r,n=!1){e&&t&&r&&(e==null||e.addEventListener(t,r,n))},Pn=function(e,t,r,n=!1){e&&t&&r&&(e==null||e.removeEventListener(t,r,n))};function Ct(e,t){if(!e||!t)return!1;if(t.indexOf(" ")!==-1)throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):(e.getAttribute("class")||"").split(" ").includes(t)}function Fe(e,t){if(!e)return;let r=e.getAttribute("class")||"";const n=Qe(r),s=(t||"").split(" ").filter(a=>!n.includes(a)&&!!a.trim());e.classList?e.classList.add(...s):(r+=` ${s.join(" ")}`,e.setAttribute("class",r))}function je(e,t){if(!e||!t)return;const r=Qe(t);let n=e.getAttribute("class")||"";if(e.classList){e.classList.remove(...r);return}r.forEach(a=>{n=n.replace(` ${a} `," ")});const s=Qe(n).join(" ");e.setAttribute("class",s)}const At=function(e,t){var r;if(!ie||!e||!t)return"";t=Cr(t),t==="float"&&(t="cssFloat");try{const n=e.style[t];if(n)return n;const s=(r=document.defaultView)==null?void 0:r.getComputedStyle(e,"");return s?s[t]:""}catch{return e.style[t]}},dt={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},$n='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',kn=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,Tn=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},Lt=e=>Array.from(e.querySelectorAll($n)).filter(t=>Tn(t)&&kn(t)),Un=e=>{e.preventDefault(),e.stopPropagation()},Nn=()=>{G==null||G.doOnModalClick()};let tt=!1;const Ot=function(){if(!ie)return;let{modalDom:e}=G;return e?tt=!0:(tt=!1,e=document.createElement("div"),G.modalDom=e,et(e,"touchmove",Un),et(e,"click",Nn)),e},Ie={},G={modalFade:!0,modalDom:void 0,globalInitialZIndex:2e3,zIndex:0,getInitialZIndex(){return Ar()?this.globalInitialZIndex:this.globalInitialZIndex},getInstance(e){return Ie[e]},register(e,t){e&&t&&(Ie[e]=t)},deregister(e){e&&(Ie[e]=null,delete Ie[e])},nextZIndex(){return this.getInitialZIndex()+ ++this.zIndex},modalStack:[],doOnModalClick(){const e=G.modalStack[G.modalStack.length-1];if(!e)return;const t=G.getInstance(e.id);t&&t.closeOnClickModal.value&&t.close()},openModal(e,t,r,n,s){if(!ie||!e||t===void 0)return;this.modalFade=s;const{modalStack:a}=this;for(let d=0,v=a.length;d<v;d++)if(a[d].id===e)return;const c=Ot();Fe(c,"v-modal"),this.modalFade&&!tt&&Fe(c,"v-modal-enter"),n&&n.trim().split(/\s+/).forEach(v=>Fe(c,v)),setTimeout(()=>{je(c,"v-modal-enter")},200),r&&r.parentNode&&r.parentNode.nodeType!==11?r.parentNode.appendChild(c):document.body.appendChild(c),t&&(c.style.zIndex=String(t)),c.tabIndex=0,c.style.display="",this.modalStack.push({id:e,zIndex:t,modalClass:n})},closeModal(e){const{modalStack:t}=this,r=Ot();if(t.length>0){const n=t[t.length-1];if(n.id===e)n.modalClass&&n.modalClass.trim().split(/\s+/).forEach(a=>je(r,a)),t.pop(),t.length>0&&(r.style.zIndex=`${t[t.length-1].zIndex}`);else for(let s=t.length-1;s>=0;s--)if(t[s].id===e){t.splice(s,1);break}}t.length===0&&(this.modalFade&&Fe(r,"v-modal-leave"),setTimeout(()=>{t.length===0&&(r.parentNode&&r.parentNode.removeChild(r),r.style.display="none",G.modalDom=void 0),je(r,"v-modal-leave")},200))}},zn=function(){if(ie&&G.modalStack.length>0){const e=G.modalStack[G.modalStack.length-1];return e?G.getInstance(e.id):void 0}};ie&&window.addEventListener("keydown",function(e){if(e.code===dt.esc){const t=zn();t&&t.closeOnPressEscape.value&&(t.handleClose?t.handleClose():t.handleAction?t.handleAction("cancel"):t.close())}});let Me;function In(){var e;if(!ie)return 0;if(Me!==void 0)return Me;const t=document.createElement("div");t.className="su-scrollbar__wrap",t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const r=t.offsetWidth;t.style.overflow="scroll";const n=document.createElement("div");n.style.width="100%",t.appendChild(n);const s=n.offsetWidth;return(e=t.parentNode)==null||e.removeChild(t),Me=r-s,Me}class Mn extends Error{constructor(t){super(t),this.name="SmartUIError"}}function Bn(e,t){throw new Mn(`[${e}] ${t}`)}const jn=e=>{if(Tt(e)||Bn("[useLockScreen]","You need to pass a ref param to this function"),!ie||Ct(document.body,"su-popup-parent--hidden"))return;let t=0,r=!1,n="0",s=0;const a=()=>{je(document.body,"su-popup-parent--hidden"),r&&(document.body.style.paddingRight=n)};Q(e,c=>{if(!c){a();return}r=!Ct(document.body,"su-popup-parent--hidden"),r&&(n=document.body.style.paddingRight,s=parseInt(At(document.body,"paddingRight"),10)),t=In();const d=document.documentElement.clientHeight<document.body.scrollHeight,v=At(document.body,"overflowY");t>0&&(d||v==="scroll")&&r&&(document.body.style.paddingRight=`${s+t}px`),Fe(document.body,"su-popup-parent--hidden")}),Lr(()=>a())},Ce=[],Hn=e=>{Ce.length!==0&&e.code===dt.esc&&(e.stopPropagation(),Ce[Ce.length-1].handleClose())},Wn=(e,t)=>{Q(t,r=>{r?Ce.push(e):Ce.splice(Ce.findIndex(n=>n===e),1)})};ie&&Or(document,"keydown",Hn);const Yn=(e,t)=>{let r;Q(()=>e.value,n=>{var s,a;n?(r=document.activeElement,Tt(t)&&((a=(s=t.value).focus)==null||a.call(s))):r.focus()})},Vn=e=>{if(!e)return{onClick:Xe,onMousedown:Xe,onMouseup:Xe};let t=!1,r=!1;return{onClick:c=>{t&&r&&e(c),t=r=!1},onMousedown:c=>{t=c.target===c.currentTarget},onMouseup:c=>{r=c.target===c.currentTarget}}},qn=(e,{emit:t},r)=>{const n=O(!1),s=O(!1),a=O(!1),c=O(e.zIndex||G.nextZIndex());let d,v;const g=I(()=>lt(e.width)?`${e.width}px`:e.width),p=I(()=>{const l={},u="--su-dialog";return e.fullscreen||(e.top&&(l[`${u}-margin-top`]=e.top),e.left?(l[`${u}-left`]=e.left,l[`${u}-right`]="auto"):e.right&&(l[`${u}-right`]=e.right,l[`${u}-left`]="auto"),e.width&&(l[`${u}-width`]=g.value)),l});function m(){t("opened")}function b(){t("closed"),t(jt,!1),e.destroyOnClose&&(a.value=!1)}function E(){t("close")}function D(){v==null||v(),d==null||d(),e.openDelay&&e.openDelay>0?{stop:d}=gt(()=>i(),e.openDelay):i()}function S(){d==null||d(),v==null||v(),e.closeDelay&&e.closeDelay>0?{stop:v}=gt(()=>o(),e.closeDelay):o()}function _(l){l||(s.value=!0,n.value=!1)}function h(){e.beforeClose?e.beforeClose(_):S()}function f(){e.closeOnClickModal&&h()}function i(){ie&&(n.value=!0)}function o(){n.value=!1}return e.lockScroll&&e.modal&&jn(n),e.closeOnPressEscape&&Wn({handleClose:h},n),Yn(n),Q(()=>e.modelValue,l=>{l?(s.value=!1,D(),a.value=!0,t("open"),c.value=e.zIndex?c.value++:G.nextZIndex(),Re(()=>{r.value&&(r.value.scrollTop=0)})):n.value&&S()}),Ue(()=>{e.modelValue&&(n.value=!0,a.value=!0,D())}),{afterEnter:m,afterLeave:b,beforeLeave:E,handleClose:h,onModalClick:f,close:S,doClose:o,closed:s,style:p,rendered:a,visible:n,zIndex:c}},rt="_trap-focus-children",pe=[],Rt=e=>{if(pe.length===0)return;const t=pe[pe.length-1][rt];if(t.length>0&&e.code===dt.tab){if(t.length===1){e.preventDefault(),document.activeElement!==t[0]&&t[0].focus();return}const r=e.shiftKey,n=e.target===t[0],s=e.target===t[t.length-1];n&&r&&(e.preventDefault(),t[t.length-1].focus()),s&&!r&&(e.preventDefault(),t[0].focus())}},Gn={beforeMount(e){e[rt]=Lt(e),pe.push(e),pe.length<=1&&et(document,"keydown",Rt)},updated(e){Re(()=>{e[rt]=Lt(e)})},unmounted(){pe.shift(),pe.length===0&&Pn(document,"keydown",Rt)}},xe="__DRAG_HOOK",nt="__DRAG_HANDLE";var st;(function(e){e.x="x",e.y="y",e.disabled="disabled"})(st||(st={}));function Qt(e,t){if(t){let r=t.getElementsByClassName(e)[0];return!r&&t.parentElement&&(r=Qt(e,t.parentElement)),r}return document.getElementsByClassName(e)[0]}function Xn(e,t){const r=O(t.arg),n=I(()=>r.value===st.disabled),s=I(()=>{var i,o;return(o=(i=t.value)==null?void 0:i.boundary)!=null?o:!1}),a=O(!1),c=O(!1),d=O(!1),v={x:0,y:0},g={x:0,y:0},p={x:0,y:0};e.classList.add("su-drag");const m=I(()=>!n.value&&d.value),b=()=>{d.value=!0},E=i=>{var o;m.value&&(i.preventDefault(),g.x=i.clientX,g.y=i.clientY,typeof((o=t.value)==null?void 0:o.started)=="function"&&t.value.started(g),c.value=!0)},D=i=>{var o,l;n.value||!c.value||(i.preventDefault(),p.x=v.x,p.y=v.y,typeof((o=t.value)==null?void 0:o.dragEnded)=="function"&&(console.warn("dragEnded was deprecated, please use ended instead it."),t.value.dragEnded(v)),typeof((l=t.value)==null?void 0:l.ended)=="function"&&t.value.ended(v),c.value=!1,d.value=!1,e.style.userSelect="",e.style.touchAction="")},S=i=>{var o;if(n.value||!c.value)return;i.preventDefault(),c.value=!0;let l=i.clientX-g.x+p.x,u=i.clientY-g.y+p.y;if(s.value){let L=document.body;if(s.value instanceof HTMLElement&&(L=s.value),typeof s.value=="string"){const y=Qt(s.value,e);y&&(L=y)}const P={minX:L.offsetLeft,minY:L.offsetTop,maxX:L.offsetLeft+L.offsetWidth,maxY:L.offsetTop+L.offsetHeight};l+e.offsetLeft+e.offsetWidth>=P.maxX?l=P.maxX-e.offsetWidth-e.offsetLeft:l+e.offsetLeft<=P.minX&&(l=P.minX-e.offsetLeft),u+e.offsetTop+e.offsetHeight>=P.maxY?u=P.maxY-e.offsetHeight-e.offsetTop:u+e.offsetTop<=P.minY&&(u=P.minY-e.offsetTop)}l=r.value==="y"?0:l,u=r.value==="x"?0:u,v.x=l,v.y=u,typeof((o=t.value)==null?void 0:o.move)=="function"&&t.value.move(v),e.style.transform=`translate3d(${l}px, ${u}px, 0px)`,e.style.userSelect="none",e.style.touchAction="none"},_=i=>{b(),E(i)},h=i=>{a.value=!0,i.removeEventListener("mousedown",_),i.addEventListener("mousedown",_)};return Q(()=>a,i=>{i.value?document.removeEventListener("mousedown",E):(document.addEventListener("mousedown",E),e.addEventListener("mousedown",b))},{immediate:!0,deep:!0}),document.addEventListener("mousemove",S),document.addEventListener("mouseup",D),{hasHandle:a,arg:r,disabled:n,handleDragStart:E,handleDragEnd:D,handleMouseMove:S,handleSelfDown:b,smartDragHandle:h,dispose:()=>{document.removeEventListener("mousedown",E),document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",D),e.removeEventListener("mousedown",b),e.classList.remove("su-drag")}}}const er=e=>{if(e){if(e[nt])return e;if(e.children instanceof Array)for(let t=0,r=e.children.length;t<r;t++){const n=e.children[t];if(er(n))return n}return}},Zn=function(e,t,r){const n=Xn(e,t);r[xe]=n},tr={created(e,t,r){Zn(e,t,r)},mounted(e,t,r){const n=r[xe],s=er(r);s&&n.smartDragHandle(s.el)},updated(e,t,r,n){Re(()=>{const s=n[xe];r[xe]=s})},beforeUnmount(e,t,r){r[xe].dispose()}},rr={beforeMount(e,t,r){r[nt]=!0},updated(e,t,r){r[nt]=!0}},Pe="__RESIZE_HOOK",it="__RESIZE_HANDLE";var ot;(function(e){e.e="e",e.w="w",e.n="n",e.s="s",e.en="en",e.es="es",e.wn="wn",e.ws="ws",e.disabled="disabled"})(ot||(ot={}));function Kn(e,t){var r,n,s,a;const c=O(t.arg||"news"),d=I(()=>c.value===ot.disabled);e.classList.add("su-resize");const v=((r=t.value)==null?void 0:r.minWidth)||0,g=((n=t.value)==null?void 0:n.minHeight)||0,p=((s=t.value)==null?void 0:s.maxWidth)||1e7,m=((a=t.value)==null?void 0:a.maxHeight)||1e7;let b,E;const D=O("e"),S=O(!1),_=O(!1);let h,f,i=!1,o=0,l=0,u=!1;const L=w=>{var M;const te=w.clientX-h;let $=o;b==="w"?$=o-te:$=te,$<v?$=v:$>p&&($=p),e.style.width=`${$}px`,typeof((M=t.value)==null?void 0:M.resizeEnded)=="function"&&t.value.resizeEnded(`width:${$}`)},P=w=>{var M;const te=w.clientY-f;let $=l;E==="n"?$=l-te:$=te,$<g?$=g:$>m&&($=m),e.style.height=`${$}px`,typeof((M=t.value)==null?void 0:M.resizeEnded)=="function"&&t.value.resizeEnded(`height:${$}`)},y=w=>{if(!w||w.indexOf("-resize")<0){b=void 0,E=void 0;return}D.value=w.replace("-resize",""),b=D.value.indexOf("e")>=0?"e":D.value.indexOf("w")>=0?"w":void 0,E=D.value.indexOf("s")>=0?"s":D.value.indexOf("n")>=0?"n":void 0},C=w=>{const M=e.getBoundingClientRect(),te=12,$={x:w.clientX,y:w.clientY};let be="";return c.value.indexOf("n")>-1&&$.y>=M.top&&$.y<=M.top+te?(be+="n",u=!0):c.value.indexOf("s")>-1&&$.y>=M.bottom-te&&$.y<=M.bottom&&(be+="s",u=!0),c.value.indexOf("w")>-1&&$.x>=M.left&&$.x<=M.left+te?(be+="w",u=!0):c.value.indexOf("e")>-1&&$.x>=M.right-te&&$.x<=M.right&&(be+="e",u=!0),be!==""?`${be}-resize`:"default"},T=(w,M)=>{for(;w!==void 0&&w!=null&&w.tagName&&w.tagName.toUpperCase()!=="BODY";){if(w===M)return!0;w=w.parentNode}return!1},F=I(()=>!d.value&&S.value),R=w=>{if(!(!F.value||!u)&&(w.preventDefault(),i=!0,u=!1,h||(h=w.clientX-w.offsetX),f||(f=w.clientY-w.offsetY),o=e.offsetWidth,l=e.offsetHeight,T(w.target,e))){const M=C(w);M!=="move"&&y(M)}},ue=w=>{d.value||(!i&&T(w.target,e)&&(e.style.cursor=C(w)),u&&(w.preventDefault(),b&&L(w),E&&P(w)))},ce=w=>{i=!1,!(d.value||!u)&&(w.preventDefault(),u=!1,h=null,f=null,y(null),S.value=!1)},ye=()=>{S.value=!0},Ne=w=>{ye(),R(w)},Sr=w=>{_.value=!0,w.removeEventListener("mousedown",Ne),w.addEventListener("mousedown",Ne)};return Q(()=>_,w=>{w.value?document.removeEventListener("mousedown",R):(document.addEventListener("mousedown",R),e.addEventListener("mousedown",ye))},{immediate:!0,deep:!0}),document.addEventListener("mousemove",ue),document.addEventListener("mouseup",ce),{hasHandle:_,arg:c,disabled:d,handleResizeStart:R,handleResizeEnd:ce,handleMouseMove:ue,handleSelfDown:ye,smartResizeHandle:Sr,dispose:()=>{document.removeEventListener("mousedown",R),document.removeEventListener("mousemove",ue),document.removeEventListener("mouseup",ce),e.removeEventListener("mousedown",ye),e.classList.remove("su-resize")}}}const nr=e=>{if(e){if(e[it])return e;if(e.children instanceof Array)for(let t=0,r=e.children.length;t<r;t++){const n=e.children[t];if(nr(n))return n}return}},Jn=function(e,t,r){const n=Kn(e,t);r[Pe]=n},sr={created(e,t,r){Jn(e,t,r)},mounted(e,t,r){const n=r[Pe],s=nr(r);s&&n.smartResizeHandle(s.el)},updated(e,t,r,n){Re(()=>{const s=n[Pe];r[Pe]=s})},beforeUnmount(e,t,r){r[Pe].dispose()}},ir={beforeMount(e,t,r){r[it]=!0},updated(e,t,r){r[it]=!0}},Qn=K({name:"SuDialog",components:{SuIcon:ft,Close:Mt},directives:{TrapFocus:Gn,SmartDrag:tr,SmartDragHandle:rr,SmartResize:sr,SmartResizeHandle:ir},props:Kt,emits:Jt,setup(e,t){const r=O(),n=qn(e,t,r),s=Vn(n.onModalClick),a=I(()=>e.fullscreen?"disabled":e.drag),c=I(()=>e.fullscreen?"disabled":e.resize);return{dialogRef:r,overlayEvent:s,drag:a,resize:c,...n}}}),es=["aria-label"],ts={class:"su-dialog__title"},rs={key:0,class:"su-dialog__body"},ns={key:1,class:"su-dialog__footer"};function ss(e,t,r,n,s,a){const c=J("su-icon"),d=ze("smart-drag-handle"),v=ze("smart-drag"),g=ze("smart-resize"),p=ze("trap-focus");return x(),yt(xr,{to:"body",disabled:!e.appendToBody},[H(Fr,{name:"dialog-fade",onAfterEnter:e.afterEnter,onAfterLeave:e.afterLeave,onBeforeLeave:e.beforeLeave,persisted:""},{default:se(()=>[fe(z("div",{class:Se([e.modal?"su-overlay-dialog":"su-no-overlay-dialog"]),style:He({"z-index":e.zIndex}),onClick:t[2]||(t[2]=(...m)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...m)),onMousedown:t[3]||(t[3]=(...m)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...m)),onMouseup:t[4]||(t[4]=(...m)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...m))},[fe((x(),k("div",{ref:"dialogRef",class:Se(["su-dialog",{"is-no-overlay":!e.modal,"is-fullscreen":e.fullscreen,"su-dialog--drag":e.drag!=="disabled","su-dialog--resize":e.resize!=="disabled","su-dialog--center":e.center},e.customClass]),"aria-modal":"true",role:"dialog","aria-label":e.title||"dialog",style:He(e.style),onClick:t[1]||(t[1]=Rr(()=>{},["stop"]))},[fe((x(),k("div",{class:Se(["su-dialog__header",{"is-drag":e.drag!=="disabled"}])},[ee(e.$slots,"title",{},()=>[z("span",ts,le(e.title),1)]),e.showClose?(x(),k("button",{key:0,"aria-label":"close",class:"su-dialog__headerbtn",type:"button",onClick:t[0]||(t[0]=(...m)=>e.handleClose&&e.handleClose(...m))},[H(c,{class:"su-dialog__close"},{default:se(()=>[(x(),yt(Dr(e.closeIcon||"close")))]),_:1})])):he("v-if",!0)],2)),[[d]]),e.rendered?(x(),k("div",rs,[ee(e.$slots,"default")])):he("v-if",!0),e.$slots.footer?(x(),k("div",ns,[ee(e.$slots,"footer")])):he("v-if",!0)],14,es)),[[v,e.dragValue,e.drag],[g,e.resizeValue,e.resize],[p]])],38),[[Ae,e.visible]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var or=ae(Qn,[["render",ss],["__file","/builds/front-end/SmartUI/smart-ui/src/dialog/Dialog.vue"]]);const Ee=[],is=e=>{const t=document.createDocumentFragment();let r={...Tr.omit(e,["appContext","content"]),appendToBody:!0,destroyOnClose:!0,onClosed:a},n;function s(){var v;n&&(bt(null,t),(v=n.component)==null||v.update(),n=null);for(let g=0;g<Ee.length;g++)if(Ee[g]===a){Ee.splice(g,1);break}}function a(){typeof e.onClosed=="function"&&e.onClosed(),s.apply(this),c(r)}function c(v){var g,p,m;typeof v=="function"?r=v(r):r={...r,...v},n&&(Object.assign((p=(g=n.component)==null?void 0:g.props)!=null?p:{},r),(m=n.component)==null||m.update())}function d(v){const g={default:()=>e.content};typeof e.title!="string"&&(g.title=()=>e.title,delete v.title),e.footer&&(g.footer=()=>e.footer,delete v.footer);const p=H(or,{...v},g);return p.appContext=e.appContext||p.appContext,bt(p,t),p}return n=d(r),Ee.push(a),{destroy:a,update:c}};/**
 * @license
 * Copyright South Smart All Rights Reserved.
 */const ht=oe(or);ht.create=function(t){return is(t)};ht.destroyAll=function(){for(;Ee.length;){const t=Ee.pop();t&&t()}};const os=ht,$e="fileAdded",ke="filesAdded",ar="uploadStart",as="change",us="fileRemoved",ls="filesSubmitted",fs="fileRead",cs="fileReadProgress",ds="fileReadComplete",hs="fileError",ps="fileSuccess",vs="fileComplete",ms="complete",gs="fileProgress",ys="fileRetry",bs=4*1024*1024,X={UPLOADING:"uploading",SUCCESS:"success",ERROR:"error",PAUSED:"paused",READY:"ready",READING:"reading"},_s={image:["gif","jpg","jpeg","png","bmp","webp"],video:["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"],audio:["mp3","wav","wma","ogg","aac","flac"],document:["doc","txt","docx","pages","epub","pdf","numbers","csv","xls","xlsx","keynote","ppt","pptx"]};function Es(e){let t=e;const r=Math.floor(t/31536e3);if(r)return`${r} 年`;const n=Math.floor((t%=31536e3)/86400);if(n)return`${n} 天`;const s=Math.floor((t%=86400)/3600);if(s)return`${s} 时`;const a=Math.floor((t%=3600)/60);return a?`${a} 分钟`:`${t%60} 秒`}function j(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function ur(e){return e<1024?`${e.toFixed(0)}bytes`:e<1024*1024?`${(e/1024).toFixed(0)}KB`:e<1024*1024*1024?`${(e/1024/1024).toFixed(1)}MB`:e<1024*1024*1024*1024?`${(e/1024/1024/1024).toFixed(1)}GB`:""}const lr={options:{type:Object,default:()=>({})},autoStart:{type:Boolean,default:!0},fileStatusText:{type:[Object,Function],default:()=>({success:"上传成功",error:"上传错误",uploading:"上传中...",paused:"暂停",waiting:"等待中...",reading:"读取中...",ready:"准备上传"})}},fr=[j($e),j(ke),j(ar),j(as),j(us),j(ls),j(fs),j(cs),j(ds),j(hs),j(ps),j(vs),j(ms),j(gs),j(ys)];var cr=Object.prototype,Ss=Array.prototype,pt=cr.toString,Dt=function(e){return pt.call(e)==="[object Function]"},Ze=Array.isArray||function(e){return pt.call(e)==="[object Array]"},Ke=function(e){return pt.call(e)==="[object Object]"&&Object.getPrototypeOf(e)===cr},ws=0,_e={uid:function(){return++ws},noop:function(){},bind:function(e,t){return function(){return e.apply(t,arguments)}},preventEvent:function(e){e.preventDefault()},stop:function(e){e.preventDefault(),e.stopPropagation()},nextTick:function(e,t){setTimeout(_e.bind(e,t),0)},toArray:function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=e.length),Ss.slice.call(e,t,r)},isPlainObject:Ke,isFunction:Dt,isArray:Ze,isObject:function(e){return Object(e)===e},isString:function(e){return typeof e=="string"},isUndefined:function(e){return typeof e>"u"},isDefined:function(e){return typeof e<"u"},each:function(e,t,r){if(_e.isDefined(e.length))for(var n=0,s=e.length;n<s&&t.call(r,e[n],n,e)!==!1;n++);else for(var a in e)if(t.call(r,e[a],a,e)===!1)break},evalOpts:function(e,t){return _e.isFunction(e)&&(t=_e.toArray(arguments),e=e.apply(null,t.slice(1))),e},extend:function(){var e,t,r,n,s,a,c=arguments[0]||{},d=1,v=arguments.length,g=!1;for(typeof c=="boolean"&&(g=c,c=arguments[1]||{},d++),typeof c!="object"&&!Dt(c)&&(c={}),d===v&&(c=this,d--);d<v;d++)if((e=arguments[d])!=null)for(t in e)r=c[t],n=e[t],c!==n&&(g&&n&&(Ke(n)||(s=Ze(n)))?(s?(s=!1,a=r&&Ze(r)?r:[]):a=r&&Ke(r)?r:{},c[t]=_e.extend(g,a,n)):n!==void 0&&(c[t]=n));return c},formatSize:function(e){return e<1024?e.toFixed(0)+" bytes":e<1024*1024?(e/1024).toFixed(0)+" KB":e<1024*1024*1024?(e/1024/1024).toFixed(1)+" MB":(e/1024/1024/1024).toFixed(1)+" GB"},defineNonEnumerable:function(e,t,r){Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:r})}},Ge=_e,Je=Ge.each,Cs={_eventData:null,on:function(e,t){this._eventData||(this._eventData={}),this._eventData[e]||(this._eventData[e]=[]);var r=!1;Je(this._eventData[e],function(n){if(n===t)return r=!0,!1}),r||this._eventData[e].push(t)},off:function(e,t){this._eventData||(this._eventData={}),!(!this._eventData[e]||!this._eventData[e].length)&&(t?Je(this._eventData[e],function(r,n){if(r===t)return this._eventData[e].splice(n,1),!1},this):this._eventData[e]=[])},trigger:function(e){if(this._eventData||(this._eventData={}),!this._eventData[e])return!0;var t=this._eventData[e].slice.call(arguments,1),r=!1;return Je(this._eventData[e],function(n){r=n.apply(this,t)===!1||r},this),!r}},As=Cs,W=Ge;function vt(e,t,r){W.defineNonEnumerable(this,"uploader",e),W.defineNonEnumerable(this,"file",t),W.defineNonEnumerable(this,"bytes",null),this.offset=r,this.tested=!1,this.retries=0,this.pendingRetry=!1,this.preprocessState=0,this.readState=0,this.loaded=0,this.total=0,this.chunkSize=this.uploader.opts.chunkSize,this.startByte=this.offset*this.chunkSize,this.endByte=this.computeEndByte(),this.xhr=null}var B=vt.STATUS={PENDING:"pending",UPLOADING:"uploading",READING:"reading",SUCCESS:"success",ERROR:"error",COMPLETE:"complete",PROGRESS:"progress",RETRY:"retry"};W.extend(vt.prototype,{_event:function(e,t){t=W.toArray(arguments),t.unshift(this),this.file._chunkEvent.apply(this.file,t)},computeEndByte:function(){var e=Math.min(this.file.size,(this.offset+1)*this.chunkSize);return this.file.size-e<this.chunkSize&&!this.uploader.opts.forceChunkSize&&(e=this.file.size),e},getParams:function(){return{chunkNumber:this.offset+1,chunkSize:this.uploader.opts.chunkSize,currentChunkSize:this.endByte-this.startByte,totalSize:this.file.size,identifier:this.file.uniqueIdentifier,filename:this.file.name,relativePath:this.file.relativePath,totalChunks:this.file.chunks.length}},getTarget:function(e,t){return t.length?(e.indexOf("?")<0?e+="?":e+="&",e+t.join("&")):e},test:function(){this.xhr=new XMLHttpRequest,this.xhr.addEventListener("load",n,!1),this.xhr.addEventListener("error",n,!1);var e=W.evalOpts(this.uploader.opts.testMethod,this.file,this),t=this.prepareXhrRequest(e,!0);this.xhr.send(t);var r=this;function n(s){var a=r.status(!0);a===B.ERROR?(r._event(a,r.message()),r.uploader.uploadNextChunk()):a===B.SUCCESS?(r._event(a,r.message()),r.tested=!0):r.file.paused||(r.tested=!0,r.send())}},preprocessFinished:function(){this.endByte=this.computeEndByte(),this.preprocessState=2,this.send()},readFinished:function(e){this.readState=2,this.bytes=e,this.send()},send:function(){var e=this.uploader.opts.preprocess,t=this.uploader.opts.readFileFn;if(W.isFunction(e))switch(this.preprocessState){case 0:this.preprocessState=1,e(this);return;case 1:return}switch(this.readState){case 0:this.readState=1,t(this.file,this.file.fileType,this.startByte,this.endByte,this);return;case 1:return}if(this.uploader.opts.testChunks&&!this.tested){this.test();return}this.loaded=0,this.total=0,this.pendingRetry=!1,this.xhr=new XMLHttpRequest,this.xhr.upload.addEventListener("progress",a,!1),this.xhr.addEventListener("load",c,!1),this.xhr.addEventListener("error",c,!1);var r=W.evalOpts(this.uploader.opts.uploadMethod,this.file,this),n=this.prepareXhrRequest(r,!1,this.uploader.opts.method,this.bytes);this.xhr.send(n);var s=this;function a(d){d.lengthComputable&&(s.loaded=d.loaded,s.total=d.total),s._event(B.PROGRESS,d)}function c(d){var v=s.message();s.processingResponse=!0,s.uploader.opts.processResponse(v,function(g,p){if(s.processingResponse=!1,!!s.xhr){s.processedState={err:g,res:p};var m=s.status();if(m===B.SUCCESS||m===B.ERROR)this&&this.data&&delete this.data,s._event(m,p),m===B.ERROR&&s.uploader.uploadNextChunk();else{s._event(B.RETRY,p),s.pendingRetry=!0,s.abort(),s.retries++;var b=s.uploader.opts.chunkRetryInterval;b!==null?setTimeout(function(){s.send()},b):s.send()}}})}},abort:function(){var e=this.xhr;this.xhr=null,this.processingResponse=!1,this.processedState=null,e&&e.abort()},status:function(e){if(this.readState===1)return B.READING;if(this.pendingRetry||this.preprocessState===1)return B.UPLOADING;if(this.xhr){if(this.xhr.readyState<4||this.processingResponse)return B.UPLOADING;var t;this.uploader.opts.successStatuses.indexOf(this.xhr.status)>-1?t=B.SUCCESS:this.uploader.opts.permanentErrors.indexOf(this.xhr.status)>-1||!e&&this.retries>=this.uploader.opts.maxChunkRetries?t=B.ERROR:(this.abort(),t=B.PENDING);var r=this.processedState;return r&&r.err&&(t=B.ERROR),t}else return B.PENDING},message:function(){return this.xhr?this.xhr.responseText:""},progress:function(){if(this.pendingRetry)return 0;var e=this.status();return e===B.SUCCESS||e===B.ERROR?1:e===B.PENDING?0:this.total>0?this.loaded/this.total:0},sizeUploaded:function(){var e=this.endByte-this.startByte;return this.status()!==B.SUCCESS&&(e=this.progress()*e),e},prepareXhrRequest:function(e,t,r,n){var s=W.evalOpts(this.uploader.opts.query,this.file,this,t);s=W.extend(this.getParams(),s),s=this.uploader.opts.processParams(s);var a=W.evalOpts(this.uploader.opts.target,this.file,this,t),c=null;if(e==="GET"||r==="octet"){var d=[];W.each(s,function(v,g){d.push([encodeURIComponent(g),encodeURIComponent(v)].join("="))}),a=this.getTarget(a,d),c=n||null}else c=new FormData,W.each(s,function(v,g){c.append(g,v)}),typeof n<"u"&&c.append(this.uploader.opts.fileParameterName,n,this.file.name);return this.xhr.open(e,a,!0),this.xhr.withCredentials=this.uploader.opts.withCredentials,W.each(W.evalOpts(this.uploader.opts.headers,this.file,this,t),function(v,g){this.xhr.setRequestHeader(g,v)},this),c}});var dr=vt,N=Ge,De=dr;function at(e,t,r){N.defineNonEnumerable(this,"uploader",e),this.isRoot=this.isFolder=e===this,N.defineNonEnumerable(this,"parent",r||null),N.defineNonEnumerable(this,"files",[]),N.defineNonEnumerable(this,"fileList",[]),N.defineNonEnumerable(this,"chunks",[]),N.defineNonEnumerable(this,"_errorFiles",[]),N.defineNonEnumerable(this,"file",null),this.id=N.uid(),this.isRoot||!t?this.file=null:N.isString(t)?(this.isFolder=!0,this.file=null,this.path=t,this.parent.path&&(t=t.substr(this.parent.path.length)),this.name=t.charAt(t.length-1)==="/"?t.substr(0,t.length-1):t):(this.file=t,this.fileType=this.file.type,this.name=t.fileName||t.name,this.size=t.size,this.relativePath=t.relativePath||t.webkitRelativePath||this.name,this._parseFile()),this.paused=e.opts.initialPaused,N.isFunction(e.opts.generateUniqueIdentifier)?this.reading=!1:this.reading=!this.uniqueIdentifier||!1,this.error=!1,this.allError=!1,this.aborted=!1,this.cancelled=!1,this.uploading=!1,this.complete=!1,this.averageSpeed=0,this.currentSpeed=0,this._lastProgressCallback=Date.now(),this._prevUploadedSize=0,this._prevProgress=0,this.bootstrap()}N.extend(at.prototype,{_parseFile:function(){var e=Os(this.relativePath);if(e.length){var t=this.uploader.filePaths;N.each(e,function(r,n){var s=t[r];s||(s=new at(this.uploader,r,this.parent),t[r]=s,this._updateParentFileList(s)),this.parent=s,s.files.push(this),e[n+1]||s.fileList.push(this)},this)}else this._updateParentFileList()},_updateParentFileList:function(e){e||(e=this);var t=this.parent;t&&t.fileList.push(e)},_eachAccess:function(e,t){if(this.isFolder){N.each(this.files,function(r,n){return e.call(this,r,n)},this);return}t.call(this,this)},bootstrap:function(){if(!(this.isFolder||this.reading)){var e=this.uploader.opts;N.isFunction(e.initFileFn)&&e.initFileFn.call(this,this),this.abort(!0),this._resetError(),this._prevProgress=0;for(var t=e.forceChunkSize?Math.ceil:Math.floor,r=Math.max(t(this.size/e.chunkSize),1),n=0;n<r;n++)this.chunks.push(new De(this.uploader,this,n))}},_measureSpeed:function(e){var t=0,r=0,n=0;this._eachAccess(function(s){!s.paused&&!s.error&&(n+=1,t+=s.averageSpeed||0,r+=s.currentSpeed||0)},function(){var s=Date.now()-this._lastProgressCallback;if(s){var a=this.uploader.opts.speedSmoothingFactor,c=this.sizeUploaded();this.currentSpeed=Math.max((c-this._prevUploadedSize)/s*1e3,0),this.averageSpeed=a*this.currentSpeed+(1-a)*this.averageSpeed,this._prevUploadedSize=c}}),this.isFolder&&(n?(this.currentSpeed=r/n,this.averageSpeed=t/n):(this.currentSpeed=0,this.averageSpeed=0)),this.parent&&(e||this.parent._checkProgress())&&this.parent._measureSpeed()},_checkProgress:function(e){return Date.now()-this._lastProgressCallback>=this.uploader.opts.progressCallbacksInterval},_chunkEvent:function(e,t,r){var n=this.uploader,s=De.STATUS,a=this,c=this.getRoot(),d=function(g){a._measureSpeed(g),n._trigger("fileProgress",c,a,e),a._lastProgressCallback=Date.now()};switch(t){case s.PROGRESS:this._checkProgress()&&d();break;case s.ERROR:this._error(),this.abort(!0),n._trigger("fileError",c,this,r,e);break;case s.SUCCESS:if(this._updateUploadedChunks(r,e),this.error)return;clearTimeout(this._progeressId),this._progeressId=0;var v=Date.now()-this._lastProgressCallback;v<n.opts.progressCallbacksInterval&&(this._progeressId=setTimeout(d,n.opts.progressCallbacksInterval-v)),this.isComplete()?(clearTimeout(this._progeressId),d(!0),this.currentSpeed=0,this.averageSpeed=0,n._trigger("fileSuccess",c,this,r,e),c.isComplete()&&(this.chunks=[],n._trigger("fileComplete",c,this))):this._progeressId||d();break;case s.RETRY:n._trigger("fileRetry",c,this,e);break}},_updateUploadedChunks:function(e,t){var r=this.uploader.opts.checkChunkUploadedByResponse;if(r){var n=t.xhr;N.each(this.chunks,function(s){if(!s.tested){var a=r.call(this,s,e);s===t&&!a&&(s.xhr=null),a&&(s.xhr=n),s.tested=!0}},this),this._firstResponse?this.uploader.uploadNextChunk():(this._firstResponse=!0,this.uploader.upload(!0))}else this.uploader.uploadNextChunk()},_error:function(){this.error=this.allError=!0;for(var e=this.parent;e&&e!==this.uploader;)e._errorFiles.push(this),e.error=!0,e._errorFiles.length===e.files.length&&(e.allError=!0),e=e.parent},_resetError:function(){this.error=this.allError=!1;for(var e=this.parent,t=-1;e&&e!==this.uploader;)t=e._errorFiles.indexOf(this),e._errorFiles.splice(t,1),e.allError=!1,e._errorFiles.length||(e.error=!1),e=e.parent},isComplete:function(){if(this.complete)return this.complete;var e=!1;return this._eachAccess(function(t){if(!t.isComplete())return e=!0,!1},function(){var t=De.STATUS;if(!this.chunks||this.chunks.length===0)return e=!0,!1;N.each(this.chunks,function(r){var n=r.status();if(n===t.PENDING||n===t.UPLOADING||n===t.READING||r.preprocessState===1||r.readState===1)return e=!0,!1})}),this.complete=!e,!e},isUploading:function(){if(this.uploading)return this.uploading;var e=!1;return this._eachAccess(function(t){if(t.isUploading())return e=!0,!1},function(){var t=De.STATUS.UPLOADING;N.each(this.chunks,function(r){if(r.status()===t)return e=!0,!1})}),this.uploading=e,e},resume:function(){this._eachAccess(function(e){e.resume()},function(){this.paused=!1,this.aborted=!1,this.uploader.upload()}),this.paused=!1,this.aborted=!1},pause:function(){this._eachAccess(function(e){e.pause()},function(){this.paused=!0,this.abort()}),this.paused=!0,this.uploading=!1},cancel:function(){this.cancelled=!0,this.uploader.removeFile(this)},retry:function(e){var t=function(r){r.error&&r.bootstrap()};e?e.bootstrap():this._eachAccess(t,function(){this.bootstrap()}),this.uploader.upload()},abort:function(e){if(!this.aborted){this.currentSpeed=0,this.averageSpeed=0,this.aborted=!e;var t=this.chunks;e&&(this.chunks=[]);var r=De.STATUS.UPLOADING;N.each(t,function(n){n.status()===r&&(n.abort(),this.uploader.uploadNextChunk())},this)}},progress:function(){var e=0,t=0,r=0;return this._eachAccess(function(n,s){e+=n.progress()*n.size,t+=n.size,s===this.files.length-1&&(r=t>0?e/t:this.isComplete()?1:0)},function(){if(this.error){r=1;return}if(this.chunks.length===1){this._prevProgress=Math.max(this._prevProgress,this.chunks[0].progress()),r=this._prevProgress;return}var n=0;N.each(this.chunks,function(a){n+=a.progress()*(a.endByte-a.startByte)});var s=n/this.size;this._prevProgress=Math.max(this._prevProgress,s>.9999?1:s),r=this._prevProgress}),r},getSize:function(){var e=0;return this._eachAccess(function(t){e+=t.size},function(){e+=this.size}),e},getFormatSize:function(){var e=this.getSize();return N.formatSize(e)},getRoot:function(){if(this.isRoot)return this;for(var e=this.parent;e;){if(e.parent===this.uploader)return e;e=e.parent}return this},sizeUploaded:function(){var e=0;return this._eachAccess(function(t){e+=t.sizeUploaded()},function(){N.each(this.chunks,function(t){e+=t.sizeUploaded()})}),e},timeRemaining:function(){var e=0,t=0,r=0;return this._eachAccess(function(s,a){!s.paused&&!s.error&&(t+=s.size-s.sizeUploaded(),r+=s.averageSpeed),a===this.files.length-1&&(e=n(t,r))},function(){if(this.paused||this.error){e=0;return}var s=this.size-this.sizeUploaded();e=n(s,this.averageSpeed)}),e;function n(s,a){return s&&!a?Number.POSITIVE_INFINITY:!s&&!a?0:Math.floor(s/a)}},removeFile:function(e){if(e.isFolder)for(;e.files.length;){var t=e.files[e.files.length-1];this._removeFile(t)}this._removeFile(e)},_delFilePath:function(e){e.path&&this.filePaths&&delete this.filePaths[e.path],N.each(e.fileList,function(t){this._delFilePath(t)},this)},_removeFile:function(e){if(!e.isFolder){N.each(this.files,function(n,s){if(n===e)return this.files.splice(s,1),!1},this),e.abort();for(var t=e.parent,r;t&&t!==this;)r=t.parent,t._removeFile(e),t=r}e.parent===this&&N.each(this.fileList,function(n,s){if(n===e)return this.fileList.splice(s,1),!1},this),!this.isRoot&&this.isFolder&&!this.files.length&&(this.parent._removeFile(this),this.uploader._delFilePath(this)),e.parent=null},getType:function(){return this.isFolder?"folder":this.file.type&&this.file.type.split("/")[1]},getExtension:function(){return this.isFolder?"":this.name.substr((~-this.name.lastIndexOf(".")>>>0)+2).toLowerCase()}});var Ls=at;function Os(e){var t=[],r=e.split("/"),n=r.length,s=1;if(r.splice(n-1,1),n--,r.length)for(;s<=n;)t.push(r.slice(0,s++).join("/")+"/");return t}var hr={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(r){var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function s(h,f){var i=h[0],o=h[1],l=h[2],u=h[3];i+=(o&l|~o&u)+f[0]-680876936|0,i=(i<<7|i>>>25)+o|0,u+=(i&o|~i&l)+f[1]-389564586|0,u=(u<<12|u>>>20)+i|0,l+=(u&i|~u&o)+f[2]+606105819|0,l=(l<<17|l>>>15)+u|0,o+=(l&u|~l&i)+f[3]-1044525330|0,o=(o<<22|o>>>10)+l|0,i+=(o&l|~o&u)+f[4]-176418897|0,i=(i<<7|i>>>25)+o|0,u+=(i&o|~i&l)+f[5]+1200080426|0,u=(u<<12|u>>>20)+i|0,l+=(u&i|~u&o)+f[6]-1473231341|0,l=(l<<17|l>>>15)+u|0,o+=(l&u|~l&i)+f[7]-45705983|0,o=(o<<22|o>>>10)+l|0,i+=(o&l|~o&u)+f[8]+1770035416|0,i=(i<<7|i>>>25)+o|0,u+=(i&o|~i&l)+f[9]-1958414417|0,u=(u<<12|u>>>20)+i|0,l+=(u&i|~u&o)+f[10]-42063|0,l=(l<<17|l>>>15)+u|0,o+=(l&u|~l&i)+f[11]-1990404162|0,o=(o<<22|o>>>10)+l|0,i+=(o&l|~o&u)+f[12]+1804603682|0,i=(i<<7|i>>>25)+o|0,u+=(i&o|~i&l)+f[13]-40341101|0,u=(u<<12|u>>>20)+i|0,l+=(u&i|~u&o)+f[14]-1502002290|0,l=(l<<17|l>>>15)+u|0,o+=(l&u|~l&i)+f[15]+1236535329|0,o=(o<<22|o>>>10)+l|0,i+=(o&u|l&~u)+f[1]-165796510|0,i=(i<<5|i>>>27)+o|0,u+=(i&l|o&~l)+f[6]-1069501632|0,u=(u<<9|u>>>23)+i|0,l+=(u&o|i&~o)+f[11]+643717713|0,l=(l<<14|l>>>18)+u|0,o+=(l&i|u&~i)+f[0]-373897302|0,o=(o<<20|o>>>12)+l|0,i+=(o&u|l&~u)+f[5]-701558691|0,i=(i<<5|i>>>27)+o|0,u+=(i&l|o&~l)+f[10]+38016083|0,u=(u<<9|u>>>23)+i|0,l+=(u&o|i&~o)+f[15]-660478335|0,l=(l<<14|l>>>18)+u|0,o+=(l&i|u&~i)+f[4]-405537848|0,o=(o<<20|o>>>12)+l|0,i+=(o&u|l&~u)+f[9]+568446438|0,i=(i<<5|i>>>27)+o|0,u+=(i&l|o&~l)+f[14]-1019803690|0,u=(u<<9|u>>>23)+i|0,l+=(u&o|i&~o)+f[3]-187363961|0,l=(l<<14|l>>>18)+u|0,o+=(l&i|u&~i)+f[8]+1163531501|0,o=(o<<20|o>>>12)+l|0,i+=(o&u|l&~u)+f[13]-1444681467|0,i=(i<<5|i>>>27)+o|0,u+=(i&l|o&~l)+f[2]-51403784|0,u=(u<<9|u>>>23)+i|0,l+=(u&o|i&~o)+f[7]+1735328473|0,l=(l<<14|l>>>18)+u|0,o+=(l&i|u&~i)+f[12]-1926607734|0,o=(o<<20|o>>>12)+l|0,i+=(o^l^u)+f[5]-378558|0,i=(i<<4|i>>>28)+o|0,u+=(i^o^l)+f[8]-2022574463|0,u=(u<<11|u>>>21)+i|0,l+=(u^i^o)+f[11]+1839030562|0,l=(l<<16|l>>>16)+u|0,o+=(l^u^i)+f[14]-35309556|0,o=(o<<23|o>>>9)+l|0,i+=(o^l^u)+f[1]-1530992060|0,i=(i<<4|i>>>28)+o|0,u+=(i^o^l)+f[4]+1272893353|0,u=(u<<11|u>>>21)+i|0,l+=(u^i^o)+f[7]-155497632|0,l=(l<<16|l>>>16)+u|0,o+=(l^u^i)+f[10]-1094730640|0,o=(o<<23|o>>>9)+l|0,i+=(o^l^u)+f[13]+681279174|0,i=(i<<4|i>>>28)+o|0,u+=(i^o^l)+f[0]-358537222|0,u=(u<<11|u>>>21)+i|0,l+=(u^i^o)+f[3]-722521979|0,l=(l<<16|l>>>16)+u|0,o+=(l^u^i)+f[6]+76029189|0,o=(o<<23|o>>>9)+l|0,i+=(o^l^u)+f[9]-640364487|0,i=(i<<4|i>>>28)+o|0,u+=(i^o^l)+f[12]-421815835|0,u=(u<<11|u>>>21)+i|0,l+=(u^i^o)+f[15]+530742520|0,l=(l<<16|l>>>16)+u|0,o+=(l^u^i)+f[2]-995338651|0,o=(o<<23|o>>>9)+l|0,i+=(l^(o|~u))+f[0]-198630844|0,i=(i<<6|i>>>26)+o|0,u+=(o^(i|~l))+f[7]+1126891415|0,u=(u<<10|u>>>22)+i|0,l+=(i^(u|~o))+f[14]-1416354905|0,l=(l<<15|l>>>17)+u|0,o+=(u^(l|~i))+f[5]-57434055|0,o=(o<<21|o>>>11)+l|0,i+=(l^(o|~u))+f[12]+1700485571|0,i=(i<<6|i>>>26)+o|0,u+=(o^(i|~l))+f[3]-1894986606|0,u=(u<<10|u>>>22)+i|0,l+=(i^(u|~o))+f[10]-1051523|0,l=(l<<15|l>>>17)+u|0,o+=(u^(l|~i))+f[1]-2054922799|0,o=(o<<21|o>>>11)+l|0,i+=(l^(o|~u))+f[8]+1873313359|0,i=(i<<6|i>>>26)+o|0,u+=(o^(i|~l))+f[15]-30611744|0,u=(u<<10|u>>>22)+i|0,l+=(i^(u|~o))+f[6]-1560198380|0,l=(l<<15|l>>>17)+u|0,o+=(u^(l|~i))+f[13]+1309151649|0,o=(o<<21|o>>>11)+l|0,i+=(l^(o|~u))+f[4]-145523070|0,i=(i<<6|i>>>26)+o|0,u+=(o^(i|~l))+f[11]-1120210379|0,u=(u<<10|u>>>22)+i|0,l+=(i^(u|~o))+f[2]+718787259|0,l=(l<<15|l>>>17)+u|0,o+=(u^(l|~i))+f[9]-343485551|0,o=(o<<21|o>>>11)+l|0,h[0]=i+h[0]|0,h[1]=o+h[1]|0,h[2]=l+h[2]|0,h[3]=u+h[3]|0}function a(h){var f=[],i;for(i=0;i<64;i+=4)f[i>>2]=h.charCodeAt(i)+(h.charCodeAt(i+1)<<8)+(h.charCodeAt(i+2)<<16)+(h.charCodeAt(i+3)<<24);return f}function c(h){var f=[],i;for(i=0;i<64;i+=4)f[i>>2]=h[i]+(h[i+1]<<8)+(h[i+2]<<16)+(h[i+3]<<24);return f}function d(h){var f=h.length,i=[1732584193,-271733879,-1732584194,271733878],o,l,u,L,P,y;for(o=64;o<=f;o+=64)s(i,a(h.substring(o-64,o)));for(h=h.substring(o-64),l=h.length,u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<l;o+=1)u[o>>2]|=h.charCodeAt(o)<<(o%4<<3);if(u[o>>2]|=128<<(o%4<<3),o>55)for(s(i,u),o=0;o<16;o+=1)u[o]=0;return L=f*8,L=L.toString(16).match(/(.*?)(.{0,8})$/),P=parseInt(L[2],16),y=parseInt(L[1],16)||0,u[14]=P,u[15]=y,s(i,u),i}function v(h){var f=h.length,i=[1732584193,-271733879,-1732584194,271733878],o,l,u,L,P,y;for(o=64;o<=f;o+=64)s(i,c(h.subarray(o-64,o)));for(h=o-64<f?h.subarray(o-64):new Uint8Array(0),l=h.length,u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<l;o+=1)u[o>>2]|=h[o]<<(o%4<<3);if(u[o>>2]|=128<<(o%4<<3),o>55)for(s(i,u),o=0;o<16;o+=1)u[o]=0;return L=f*8,L=L.toString(16).match(/(.*?)(.{0,8})$/),P=parseInt(L[2],16),y=parseInt(L[1],16)||0,u[14]=P,u[15]=y,s(i,u),i}function g(h){var f="",i;for(i=0;i<4;i+=1)f+=n[h>>i*8+4&15]+n[h>>i*8&15];return f}function p(h){var f;for(f=0;f<h.length;f+=1)h[f]=g(h[f]);return h.join("")}p(d("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function h(f,i){return f=f|0||0,f<0?Math.max(f+i,0):Math.min(f,i)}ArrayBuffer.prototype.slice=function(f,i){var o=this.byteLength,l=h(f,o),u=o,L,P,y,C;return i!==r&&(u=h(i,o)),l>u?new ArrayBuffer(0):(L=u-l,P=new ArrayBuffer(L),y=new Uint8Array(P),C=new Uint8Array(this,l,L),y.set(C),P)}}();function m(h){return/[\u0080-\uFFFF]/.test(h)&&(h=unescape(encodeURIComponent(h))),h}function b(h,f){var i=h.length,o=new ArrayBuffer(i),l=new Uint8Array(o),u;for(u=0;u<i;u+=1)l[u]=h.charCodeAt(u);return f?l:o}function E(h){return String.fromCharCode.apply(null,new Uint8Array(h))}function D(h,f,i){var o=new Uint8Array(h.byteLength+f.byteLength);return o.set(new Uint8Array(h)),o.set(new Uint8Array(f),h.byteLength),i?o:o.buffer}function S(h){var f=[],i=h.length,o;for(o=0;o<i-1;o+=2)f.push(parseInt(h.substr(o,2),16));return String.fromCharCode.apply(String,f)}function _(){this.reset()}return _.prototype.append=function(h){return this.appendBinary(m(h)),this},_.prototype.appendBinary=function(h){this._buff+=h,this._length+=h.length;var f=this._buff.length,i;for(i=64;i<=f;i+=64)s(this._hash,a(this._buff.substring(i-64,i)));return this._buff=this._buff.substring(i-64),this},_.prototype.end=function(h){var f=this._buff,i=f.length,o,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u;for(o=0;o<i;o+=1)l[o>>2]|=f.charCodeAt(o)<<(o%4<<3);return this._finish(l,i),u=p(this._hash),h&&(u=S(u)),this.reset(),u},_.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},_.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},_.prototype.setState=function(h){return this._buff=h.buff,this._length=h.length,this._hash=h.hash,this},_.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},_.prototype._finish=function(h,f){var i=f,o,l,u;if(h[i>>2]|=128<<(i%4<<3),i>55)for(s(this._hash,h),i=0;i<16;i+=1)h[i]=0;o=this._length*8,o=o.toString(16).match(/(.*?)(.{0,8})$/),l=parseInt(o[2],16),u=parseInt(o[1],16)||0,h[14]=l,h[15]=u,s(this._hash,h)},_.hash=function(h,f){return _.hashBinary(m(h),f)},_.hashBinary=function(h,f){var i=d(h),o=p(i);return f?S(o):o},_.ArrayBuffer=function(){this.reset()},_.ArrayBuffer.prototype.append=function(h){var f=D(this._buff.buffer,h,!0),i=f.length,o;for(this._length+=h.byteLength,o=64;o<=i;o+=64)s(this._hash,c(f.subarray(o-64,o)));return this._buff=o-64<i?new Uint8Array(f.buffer.slice(o-64)):new Uint8Array(0),this},_.ArrayBuffer.prototype.end=function(h){var f=this._buff,i=f.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l,u;for(l=0;l<i;l+=1)o[l>>2]|=f[l]<<(l%4<<3);return this._finish(o,i),u=p(this._hash),h&&(u=S(u)),this.reset(),u},_.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},_.ArrayBuffer.prototype.getState=function(){var h=_.prototype.getState.call(this);return h.buff=E(h.buff),h},_.ArrayBuffer.prototype.setState=function(h){return h.buff=b(h.buff,!0),_.prototype.setState.call(this,h)},_.ArrayBuffer.prototype.destroy=_.prototype.destroy,_.ArrayBuffer.prototype._finish=_.prototype._finish,_.ArrayBuffer.hash=function(h,f){var i=v(new Uint8Array(h)),o=p(i);return f?S(o):o},_})})(hr);var Rs=hr.exports,A=Ge,pr=As,ve=Ls,ut=dr,Ds=Rs,Fs="__VERSION__",mt=typeof window>"u",Ft=mt?!1:window.navigator.msPointerEnabled,xs=function(){if(mt)return!1;var e="slice",t=A.isDefined(window.File)&&A.isDefined(window.Blob)&&A.isDefined(window.FileList),r=null;return t&&(r=window.Blob.prototype,A.each(["slice","webkitSlice","mozSlice"],function(n){if(r[n])return e=n,!1}),t=!!r[e]),t&&(V.sliceName=e),r=null,t}(),Ps=function(){if(mt)return!1;var e=window.document.createElement("input");e.type="file";var t="webkitdirectory"in e||"directory"in e;return e=null,t}();function V(e){this.support=xs,this.support&&(this.supportDirectory=Ps,A.defineNonEnumerable(this,"filePaths",{}),this.opts=A.extend({},V.defaults,e||{}),this.preventEvent=A.bind(this._preventEvent,this),ve.call(this,this))}var $s=function(e,t,r,n,s){s.readFinished(e.file[V.sliceName](r,n,t))};V.version=Fs;V.defaults={chunkSize:1024*1024,forceChunkSize:!1,simultaneousUploads:3,singleFile:!1,fileParameterName:"file",progressCallbacksInterval:500,speedSmoothingFactor:.1,query:{},headers:{},withCredentials:!1,preprocess:null,method:"multipart",testMethod:"GET",uploadMethod:"POST",prioritizeFirstAndLastChunk:!1,allowDuplicateUploads:!1,target:"/",testChunks:!0,generateUniqueIdentifier:null,maxChunkRetries:0,chunkRetryInterval:null,permanentErrors:[404,415,500,501],successStatuses:[200,201,202],onDropStopPropagation:!1,initFileFn:null,readFileFn:$s,checkChunkUploadedByResponse:null,initialPaused:!1,processResponse:function(e,t){t(null,e)},processParams:function(e){return e}};V.utils=A;V.event=pr;V.File=ve;V.Chunk=ut;V.prototype=A.extend({},ve.prototype);A.extend(V.prototype,pr);A.extend(V.prototype,{constructor:V,_trigger:function(e){var t=A.toArray(arguments),r=!this.trigger.apply(this,arguments);return e!=="catchAll"&&(t.unshift("catchAll"),r=!this.trigger.apply(this,t)||r),!r},_triggerAsync:function(){var e=arguments;A.nextTick(function(){this._trigger.apply(this,e)},this)},_computeMd5:function(e){var t=this,r=new FileReader,n=e[V.sliceName],s=0,a=this.opts.chunkSize,c=Math.ceil(e.size/a),d=new Ds.ArrayBuffer,v=t.getFromFileNameAndUnique(e);if(!this.opts.allowDuplicateUploads&&v&&v.aborted||v.cancelled||v.uploading||v.complete)return;t._trigger("fileRead",v,e);function g(){var p=s*a,m=p+a>=e.size?e.size:p+a;r.readAsArrayBuffer(n.call(e,p,m));var b=t.getFromFileNameAndUnique(e);(!b&&s>0||b&&b.aborted||b.cancelled)&&r.abort(),t._trigger("fileReadProgress",p,m,b,e)}r.onload=function(p){if(d.append(p.target.result),s<c)s++,g();else{var m=d.end(),b=t.getFromFileNameAndUnique(e);if(!b)return;t._trigger("fileReadComplete",b,e,p),b.uniqueIdentifier=m,b.reading=!1,b.retry()}},r.onerror=function(p){var m=t.getFromFileNameAndUnique(e);m._error(),t._trigger("fileReadError",m,e,p)},g()},addFiles:function(e,t){var r=[],n=this.fileList.length;A.each(e,function(a){if((!Ft||Ft&&a.size>0)&&!(a.size%4096===0&&(a.name==="."||a.fileName==="."))){var c=this.generateUniqueIdentifier(a);if(this.opts.allowDuplicateUploads||!this.getFromFilePath(a)){var d=new ve(this,a,this);d.uniqueIdentifier=c,this._trigger("fileAdded",d,t)?r.push(d):ve.prototype.removeFile.call(this,d)}}},this);var s=this.fileList.slice(n);this._trigger("filesAdded",r,s,t)?(A.each(r,function(a){this.opts.singleFile&&this.files.length>0&&this.removeFile(this.files[0]),this.files.push(a)},this),this._trigger("filesSubmitted",r,s,t)):A.each(s,function(a){ve.prototype.removeFile.call(this,a)},this)},addFile:function(e,t){this.addFiles([e],t)},cancel:function(){for(var e=this.fileList.length-1;e>=0;e--)this.fileList[e].cancel()},removeFile:function(e){ve.prototype.removeFile.call(this,e),this._trigger("fileRemoved",e)},generateUniqueIdentifier:function(e){var t=this.opts.generateUniqueIdentifier;if(A.isFunction(t)){var r=t(e);if(!r){var n=e.relativePath||e.webkitRelativePath||e.fileName||e.name;return e.size+"-"+n.replace(/[^0-9a-zA-Z_-]/img,"")}return r}else this._computeMd5(e);return null},getFromUniqueIdentifier:function(e){var t=!1;return A.each(this.files,function(r){if(r.uniqueIdentifier===e)return t=r,!1}),t},getFromFilePath:function(e){var t=!1;return A.each(this.files,function(r){var n=e.relativePath||e.webkitRelativePath||e.name;if(n===r.relativePath)return t=r,!1}),t},getFromFileNameAndUnique:function(e){var t=!1;return A.each(this.files,function(r){var n=e.relativePath||e.webkitRelativePath||e.name;if(r.size===e.size&&r.relativePath===n&&!r.uniqueIdentifier)return t=r,t}),t},uploadNextChunk:function(e){var t=!1,r=ut.STATUS.PENDING,n=this.uploader.opts.checkChunkUploadedByResponse;if(this.opts.prioritizeFirstAndLastChunk&&(A.each(this.files,function(a){if(!a.paused&&!(n&&!a._firstResponse&&a.isUploading())){if(a.chunks.length&&a.chunks[0].status()===r)return a.chunks[0].send(),t=!0,!1;if(a.chunks.length>1&&a.chunks[a.chunks.length-1].status()===r)return a.chunks[a.chunks.length-1].send(),t=!0,!1}}),t))return t;if(A.each(this.files,function(a){if(!a.paused){if(n&&!a._firstResponse&&a.isUploading())return;A.each(a.chunks,function(c){if(c.status()===r)return c.send(),t=!0,!1})}if(t)return!1}),t)return!0;var s=!1;return A.each(this.files,function(a){if(!a.isComplete())return s=!0,!1}),!s&&!e&&this.files.length&&this._triggerAsync("complete"),s},upload:function(e){var t=this._shouldUploadNext();if(t!==!1){!e&&this._trigger("uploadStart");for(var r=!1,n=1;n<=this.opts.simultaneousUploads-t&&(r=this.uploadNextChunk(!e)||r,!(!r&&e));n++);!r&&!e&&this._triggerAsync("complete")}},_shouldUploadNext:function(){var e=0,t=!0,r=this.opts.simultaneousUploads,n=ut.STATUS.UPLOADING;return A.each(this.files,function(s){return A.each(s.chunks,function(a){if(a.status()===n&&(e++,e>=r))return t=!1,!1}),t}),t&&e},assignBrowse:function(e,t,r,n){typeof e.length>"u"&&(e=[e]),A.each(e,function(s){var a;s.tagName==="INPUT"&&s.type==="file"?a=s:(a=document.createElement("input"),a.setAttribute("type","file"),A.extend(a.style,{visibility:"hidden",position:"absolute",width:"1px",height:"1px"}),s.appendChild(a),s.addEventListener("click",function(d){s.tagName.toLowerCase()!=="label"&&a.click()},!1)),!this.opts.singleFile&&!r&&a.setAttribute("multiple","multiple"),t&&a.setAttribute("webkitdirectory","webkitdirectory"),n&&A.each(n,function(d,v){a.setAttribute(v,d)});var c=this;a.addEventListener("change",function(d){c._trigger(d.type,d),d.target.value&&(c.addFiles(d.target.files,d),d.target.value="")},!1)},this)},onDrop:function(e){this._trigger(e.type,e),this.opts.onDropStopPropagation&&e.stopPropagation(),e.preventDefault(),this._parseDataTransfer(e.dataTransfer,e)},_parseDataTransfer:function(e,t){e.items&&e.items[0]&&e.items[0].webkitGetAsEntry?this.webkitReadDataTransfer(e,t):this.addFiles(e.files,t)},webkitReadDataTransfer:function(e,t){var r=this,n=e.items.length,s=[];A.each(e.items,function(g){var p=g.webkitGetAsEntry();if(!p){v();return}p.isFile?c(g.getAsFile(),p.fullPath):a(p.createReader())});function a(g){g.readEntries(function(p){p.length?(n+=p.length,A.each(p,function(m){if(m.isFile){var b=m.fullPath;m.file(function(E){c(E,b)},d)}else m.isDirectory&&a(m.createReader())}),a(g)):v()},d)}function c(g,p){g.relativePath=p.substring(1),s.push(g),v()}function d(g){throw g}function v(){--n===0&&r.addFiles(s,t)}},_assignHelper:function(e,t,r){typeof e.length>"u"&&(e=[e]);var n=r?"removeEventListener":"addEventListener";A.each(e,function(s){A.each(t,function(a,c){s[n](c,a,!1)},this)},this)},_preventEvent:function(e){A.preventEvent(e),this._trigger(e.type,e)},assignDrop:function(e){this._onDrop=A.bind(this.onDrop,this),this._assignHelper(e,{dragover:this.preventEvent,dragenter:this.preventEvent,dragleave:this.preventEvent,drop:this._onDrop})},unAssignDrop:function(e){this._assignHelper(e,{dragover:this.preventEvent,dragenter:this.preventEvent,dragleave:this.preventEvent,drop:this._onDrop},!0),this._onDrop=null}});var ks=V;const Ts=Pr(ks),Us=(e,{emit:t})=>{const r=O(!1),n=O([]),s=O([]),{autoStart:a,options:c,fileStatusText:d}=e,g={...{initialPaused:!a,chunkSize:e.options.chunkSize||bs,checkChunkUploadedByResponse:(f,i)=>{let o=null;try{o=JSON.parse(i)}catch(u){console.error(u)}const{data:l}=o;if(l.status===101)return!1;if(l.status===100)return!0;if(l.status===102){const u=[];return Object.keys(l.doneChunkList).forEach(L=>{u.push(l.doneChunkList[L])}),u.indexOf(f.offset+1)>=0}},query:(f,i)=>({identifier:f.identifier,chunkNumber:i.offset+1,totalChunks:f.chunks.length}),processParams:f=>{const i=f.filename;return{...f,name:i}}},...c};let p=new Ts(g);p.fileStatusText=d,n.value=p.files,s.value=p.fileList,p.on("catchAll",m),p.on($e,b),p.on(ke,E),p.on("fileRemoved",S),p.on("filesSubmitted",_),Ut(()=>{p.off("catchAll",m),p.off($e,b),p.off(ke,E),p.off("fileRemoved",S),p.off("filesSubmitted",_),p.cancel(),p=null});function m(...f){const i=f[0],l={[$e]:!0,[ke]:!0,[ar]:D}[i];if(l){if(l===!0)return;l(...f.slice(1))}f[0]=j(i),t(f[0],...f.slice(1))}function b(f){if(f.ignored)return!1;t(j($e),f)}function E(f,i){if(f.ignored||i.ignored)return!1;t(j(ke),f,i)}function D(){r.value=!0}function S(){s.value=[...p.fileList],n.value=[...p.files]}async function _(){s.value=[...p.fileList],n.value=[...p.files],a&&p.upload()}const h=O(!0);return h.value=p.support,{uploader:p,started:r,files:n,fileList:s,support:h}},xt=["fileRead","fileReadProgress","fileReadComplete","fileProgress","fileSuccess","fileComplete","fileError"],Ns=e=>{const t=O(0),r=O(0),n=O(0),s=O(0),a=O(0),c=O(0),d=O(X.READY),v=O(null),g=O("");let p={fileRead:()=>{e.value.reading&&(d.value=X.READING)},fileReadProgress:(y,C,T,F)=>{T.id===e.value.id&&T.name===e.value.name&&(c.value=Math.floor(C/F.size*100)),m()},fileReadComplete:y=>{y.id===e.value.id&&y.name===e.value.name&&(e.value.ready=!0)},fileProgress:()=>{t.value=e.value.progress(),r.value=e.value.averageSpeed,n.value=e.value.currentSpeed,s.value=e.value.timeRemaining(),a.value=e.value.sizeUploaded(),m()},fileSuccess:(y,C,T)=>{y&&i(T);const F=Math.floor(t.value*100);p.fileProgress(),F===100?d.value=X.SUCCESS:d.value=X.UPLOADING},fileComplete:()=>{},fileError:(y,C,T)=>{p.fileProgress(),i(T),d.value=X.ERROR}};function m(){e.value.paused?d.value=X.PAUSED:e.value.error?d.value=X.ERROR:e.value.complete?d.value=X.SUCCESS:e.value.isUploading()?d.value=X.UPLOADING:e.value.ready?d.value=X.READY:e.value.reading&&(d.value=X.READING)}const b=I(()=>{const y=Math.floor(t.value*100),C=`translateX(${Math.floor(y-100)}%)`;return{progress:`${y}%`,webkitTransform:C,mozTransform:C,msTransform:C,transform:C}}),E=D();function D(){const y=e.value.getExtension(),{isFolder:C}=e.value;let T=C?"folder":"unknown";const{categoryMap:F}=e.value.uploader.opts,R=F||_s;return Object.keys(R).forEach(ue=>{R[ue].indexOf(y)>-1&&(T=ue)}),T}const S=I(()=>d.value),_=I(()=>{const{fileStatusText:y}=e.value.uploader;let C=S;return typeof y=="function"?C=y(S,v):C=y[S.value],C||S}),h=I(()=>{const y=s.value;if(y===Number.POSITIVE_INFINITY||y===0)return"";let C=Es(s.value);const{parseTimeRemaining:T}=e.value.uploader.opts;return T&&(C=T(s,C)),C}),f=I(()=>`${ur(r.value)}/ s`);function i(y){let C=y;try{C=JSON.parse(y)}catch(T){console.error(T)}finally{v.value=C}}Ue(()=>{xt.forEach(y=>{e.value.uploader.on(y,p[y])})}),Ut(()=>{xt.forEach(y=>{e.value.uploader.off(y,p[y])}),p=void 0});let o;Q(S,(y,C)=>{C&&y===X.UPLOADING&&C!==X.UPLOADING?o=setTimeout(()=>{g.value="su-uploader__file__progressing"},200):(clearTimeout(o),g.value="")});function l(){e.value.pause(),m()}function u(){e.value.resume(),m()}function L(){e.value.cancel()}function P(){e.value.retry(),m()}return{fileCategory:E,readProgress:c,progressStyle:b,status:S,statusText:_,formatedTimeRemaining:h,formatedAverageSpeed:f,pause:l,resume:u,remove:L,retry:P}},zs=K({name:"SuUploaderFile",components:{Close:Mt,Play:en,Refresh:an,PauseFill:Gr,SuIcon:ft},props:{file:{type:Object,require:!0,default:()=>({})},list:{type:Boolean,default:!1}},setup(e){const{file:t}=$r(e),r=ur(t.value.size),{fileCategory:n,readProgress:s,progressStyle:a,status:c,statusText:d,formatedTimeRemaining:v,formatedAverageSpeed:g,pause:p,resume:m,retry:b,remove:E}=Ns(t);return{size:r,fileCategory:n,readProgress:s,progressStyle:a,status:c,statusText:d,formatedTimeRemaining:v,formatedAverageSpeed:g,pause:p,resume:m,retry:b,remove:E}}}),Is={class:"su-uploader__file"},Ms=["title"],Bs=["icon"],js={class:"su-uploader__file__size"},Hs={class:"su-uploader__file__status"},Ws={key:0},Ys={style:{"margin-right":"6px"}},Vs={style:{"margin-right":"6px"}},qs={class:"su-uploader__file__actions"};function Gs(e,t,r,n,s,a){const c=J("pause-fill"),d=J("su-icon"),v=J("play"),g=J("refresh"),p=J("close");return x(),k("div",Is,[ee(e.$slots,"default",{file:e.file,size:e.size,fileCategory:e.fileCategory,progressStyle:e.progressStyle,readProgress:e.readProgress,status:e.status,statusText:e.statusText,formatedTimeRemaining:e.formatedTimeRemaining,formatedAverageSpeed:e.formatedAverageSpeed},()=>[z("div",{class:Se(["su-uploader__file__progress","is-"+e.status]),style:He(e.progressStyle)},null,6),z("div",{class:"su-uploader__file__name",title:e.file.name},[z("i",{class:"su-uploader__file__icon",icon:e.fileCategory},null,8,Bs),we(" "+le(e.file.name),1)],8,Ms),z("div",js,le(e.size),1),z("div",Hs,[fe(z("span",null,le(e.statusText),513),[[Ae,e.status!=="uploading"]]),e.status==="reading"?(x(),k("span",Ws,le(e.readProgress+"%"),1)):he("v-if",!0),fe(z("span",null,[z("span",Ys,le(e.progressStyle.progress),1),z("em",Vs,"("+le(e.formatedAverageSpeed)+")",1),z("i",null,le(e.formatedTimeRemaining),1)],512),[[Ae,e.status==="uploading"]])]),z("div",qs,[e.status==="uploading"?(x(),k("span",{key:0,class:"su-uploader__file__pause",title:"暂停",onClick:t[0]||(t[0]=(...m)=>e.pause&&e.pause(...m))},[H(d,null,{default:se(()=>[H(c)]),_:1})])):he("v-if",!0),e.status==="paused"?(x(),k("span",{key:1,class:"su-uploader__file__resume",title:"继续",onClick:t[1]||(t[1]=(...m)=>e.resume&&e.resume(...m))},[H(d,null,{default:se(()=>[H(v)]),_:1})])):he("v-if",!0),e.status==="error"?(x(),k("span",{key:2,class:"su-uploader__file__retry",title:"重新上传",onClick:t[2]||(t[2]=(...m)=>e.retry&&e.retry(...m))},[H(d,null,{default:se(()=>[H(g)]),_:1})])):he("v-if",!0),z("span",{class:"su-uploader__file__remove",title:"移除",onClick:t[3]||(t[3]=(...m)=>e.remove&&e.remove(...m))},[H(d,null,{default:se(()=>[H(p)]),_:1})])])])])}var vr=ae(zs,[["render",Gs],["__file","/builds/front-end/SmartUI/smart-ui/src/uploader/file.vue"]]);const Xs=K({name:"SuUploaderList",components:{UploaderFile:vr},setup(){const e=Ye("uploader");return{fileList:e==null?void 0:e.fileList}}}),Zs={class:"su-uploader__list"};function Ks(e,t,r,n,s,a){const c=J("uploader-file");return x(),k("div",Zs,[ee(e.$slots,"default",{fileList:e.fileList},()=>[z("ul",null,[(x(!0),k(Nt,null,zt(e.fileList,d=>(x(),k("li",{key:d.id},[H(c,{file:d,list:!0},null,8,["file"])]))),128))])])])}var mr=ae(Xs,[["render",Ks],["__file","/builds/front-end/SmartUI/smart-ui/src/uploader/list.vue"]]);const Js=K({name:"SuUploaderUnsupport",setup(){const e=Ye("uploader");return{support:e==null?void 0:e.support}}}),Qs={class:"su-uploader__unsupport"},ei=z("p",null,[we(" Your browser, unfortunately, is not supported by Uploader.js. The library requires support for "),z("a",{href:"http://www.w3.org/TR/FileAPI/"},"the HTML5 File API"),we(" along with "),z("a",{href:"http://www.w3.org/TR/FileAPI/#normalization-of-params"}," file slicing "),we(". ")],-1);function ti(e,t,r,n,s,a){return fe((x(),k("div",Qs,[ee(e.$slots,"default",{},()=>[ei])],512)),[[Ae,!e.support]])}var gr=ae(Js,[["render",ti],["__file","/builds/front-end/SmartUI/smart-ui/src/uploader/unsupport.vue"]]);const ri=K({name:"SuUploaderDrop",setup(){const e=O(null),t=Ye("uploader"),r=t==null?void 0:t.support,n=O("");Ue(async()=>{await Re();const c=e.value,{uploader:d}=t;d.assignDrop(c),d.on("dragenter",s),d.on("drop",a)}),It(()=>{const c=e.value,{uploader:d}=t;d.off("dragenter",s),d.off("drop",a),d.unAssignDrop(c)});function s(){n.value="su-uploader__drop--dragover"}function a(){n.value=""}return{dropRef:e,dropClass:n,support:r}}});function ni(e,t,r,n,s,a){return fe((x(),k("div",{ref:"dropRef",class:Se(["su-uploader__drop",e.dropClass])},[ee(e.$slots,"default")],2)),[[Ae,e.support]])}var yr=ae(ri,[["render",ni],["__file","/builds/front-end/SmartUI/smart-ui/src/uploader/drop.vue"]]);const si=K({name:"SuUploaderBtn",props:{directory:{type:Boolean,default:!1},single:{type:Boolean,default:!1},attrs:{type:Object,default:()=>({})}},setup(e){const t=Ye("uploader"),r=t==null?void 0:t.support,n=O(null);return Ue(async()=>{await Re(),t.uploader.assignBrowse(n.value,e.directory,e.single,e.attrs)}),{support:r,refBtn:n}}}),ii={ref:"refBtn",class:"su-uploader__btn"};function oi(e,t,r,n,s,a){return fe((x(),k("span",ii,[ee(e.$slots,"default")],512)),[[Ae,e.support]])}var br=ae(si,[["render",oi],["__file","/builds/front-end/SmartUI/smart-ui/src/uploader/btn.vue"]]);const ai=K({name:"SuUploader",components:{uploadList:mr,uploaderUnsupport:gr,uploaderDrop:yr,uploaderBtn:br},props:lr,emits:fr,setup(e,t){const{expose:r}=t,{uploader:n,started:s,files:a,fileList:c,support:d}=Us(e,t);return kr("uploader",{fileList:c,support:d,uploader:n}),r({uploader:n}),{fileList:c,started:s,files:a}}}),ui={class:"su-uploader"},li=z("p",null,"支持拖拽上传",-1);function fi(e,t,r,n,s,a){const c=J("uploader-unsupport"),d=J("uploader-btn"),v=J("uploader-drop"),g=J("upload-list");return x(),k("div",ui,[ee(e.$slots,"default",{files:e.files,fileList:e.fileList,started:e.started},()=>[H(c),H(v,{class:"su-uploader--paramy"},{default:se(()=>[li,H(d,null,{default:se(()=>[we("选择文件")]),_:1}),H(d,{directory:!0},{default:se(()=>[we(" 选择文件夹 ")]),_:1})]),_:1}),H(g,{"file-list":e.fileList},null,8,["file-list"])])])}var ci=ae(ai,[["render",fi],["__file","/builds/front-end/SmartUI/smart-ui/src/uploader/uploader.vue"]]);const di=oe(ci),hi=oe(mr),pi=oe(vr),vi=oe(yr),mi=oe(gr),gi=oe(br),_r={width:{default:void 0,type:[Number,String]},minWidth:{default:0,type:Number},maxWidth:{default:void 0,type:Number},height:{default:void 0,type:[Number,String]},minHeight:{default:0,type:Number},maxHeight:{default:void 0,type:Number},left:{default:0,type:[Number,String]},top:{default:0,type:[Number,String]},active:{default:()=>["r","rb","b","lb","l","lt","t","rt"],validator:e=>["r","rb","b","lb","l","lt","t","rt"].filter(t=>e.indexOf(t)!==-1).length===e.length},fitParent:{default:!1,type:Boolean},disableAttributes:{default:()=>[],validator:e=>["l","t","w","h"].filter(t=>e.indexOf(t)!==-1).length===e.length,type:Array}},de={"resizable-r":{bit:1,cursor:"e-resize"},"resizable-rb":{bit:3,cursor:"se-resize"},"resizable-b":{bit:2,cursor:"s-resize"},"resizable-lb":{bit:6,cursor:"sw-resize"},"resizable-l":{bit:4,cursor:"w-resize"},"resizable-lt":{bit:12,cursor:"nw-resize"},"resizable-t":{bit:8,cursor:"n-resize"},"resizable-rt":{bit:9,cursor:"ne-resize"}},q={l:1,t:2,w:4,h:8},yi=(e,t)=>{const r=O();let n,s;const a=O(0),c=O(0),d=I(()=>e.minWidth),v=I(()=>e.minHeight),g=I(()=>e.maxWidth),p=I(()=>e.maxHeight),m=O(0),b=O(0);let E=0,D=0,S=0,_=0,h=0;const f={width:0,height:0};let i=15;const o=I(()=>({...i&q.w&&{width:typeof a.value=="number"?`${a.value}px`:a},...i&q.h&&{height:typeof c.value=="number"?`${c.value}px`:c},...i&q.l&&{left:typeof m.value=="number"?`${m.value}px`:m},...i&q.t&&{top:typeof b.value=="number"?`${b.value}px`:b}}));Q(()=>e.width,y=>{typeof y=="number"&&(a.value=y)}),Q(()=>e.height,y=>{typeof y=="number"&&(c.value=y)}),Q(()=>e.left,y=>{typeof y=="number"&&(m.value=y)}),Q(()=>e.top,y=>{typeof y=="number"&&(b.value=y)});const l=()=>{},u=y=>{if(E!==0){Number.isNaN(a)&&(a.value=n.clientWidth),Number.isNaN(c)&&(c.value=n.clientHeight);let C,T;y.touches&&y.touches.length>=0?(C=y.touches[0].clientY,T=y.touches[0].clientX):(C=y.clientY,T=y.clientX);let F=T-D+_,R=C-S+h;if(n.getBoundingClientRect){const ce=n.getBoundingClientRect(),ye=ce.width/n.offsetWidth||1,Ne=ce.height/n.offsetHeight||1;F/=ye,R/=Ne}_=0,h=0,E&de["resizable-r"].bit&&(a.value+F<d.value?_=F-(F=d.value-a.value):g.value&&a.value+F>g.value&&(!e.fitParent||a.value+m.value<f.width)?_=F-(F=g.value-a.value):e.fitParent&&m.value+a.value+F>f.width&&(_=F-(F=f.width-m.value-a.value)),i&q.w&&(a.value+=F)),E&de["resizable-b"].bit&&(c.value+R<v.value?h=R-(R=v.value-c.value):p.value&&c.value+R>p.value&&(!e.fitParent||c.value+b.value<f.height)?h=R-(R=p.value-c.value):e.fitParent&&b.value+c.value+R>f.height&&(h=R-(R=f.height-b.value-c.value)),i&q.h&&(c.value+=R)),E&de["resizable-l"].bit&&(a.value-F<d.value?_=F-(F=a.value-d.value):g.value&&a.value-F>g.value&&m.value>=0?_=F-(F=a.value-g.value):e.fitParent&&m.value+F<0&&(_=F-(F=-m.value)),i&q.l&&(m.value+=F),i&q.w&&(a.value-=F)),E&de["resizable-t"].bit&&(c.value-R<v.value?h=R-(R=c.value-v.value):p.value&&c.value-R>p.value&&b.value>=0?h=R-(R=c.value-p.value):e.fitParent&&b.value+R<0&&(h=R-(R=-b.value)),i&q.t&&(b.value+=R),i&q.h&&(c.value-=R)),D=T,S=C;const ue="resize:move";t.emit(ue,{x:a.value,y:c.value})}},L=y=>{if(!(y.target.closest&&y.target.closest(".su-resizable")!==n)){for(const C in de)if(n.contains(y.target)&&(y.target.closest&&y.target.closest(`.${C}`)||y.target.classList.contains(C))){document.body.style.cursor=de[C].cursor,y.touches&&y.touches.length>=1?(D=y.touches[0].clientX,S=y.touches[0].clientY):(y.preventDefault&&y.preventDefault(),D=y.clientX,S=y.clientY),_=0,h=0,E=de[C].bit,f.height=n.parentElement.clientHeight,f.width=n.parentElement.clientWidth;const T="resize:start";t.emit(T,{x:a.value,y:c.value});break}}},P=()=>{if(E!==0){E=0,document.body.style.cursor="";const y="resize:end";t.emit(y)}};return Ue(()=>{n=r.value,s=n.children[0],e.width?e.width!=="auto"&&typeof e.width!="number"&&(a.value=s.offsetWidth):a.value=s.offsetWidth,e.height?e.height!=="auto"&&typeof e.height!="number"&&(c.value=s.offsetHeight):c.value=s.offsetHeight,typeof e.left!="number"&&(m.value=s.offsetLeft-s.offsetLeft),typeof e.top!="number"&&(b.value=s.offsetTop-s.offsetTop),s.style.width="100%",s.style.height="100%",d.value&&a.value<d.value&&(a.value=d.value),v.value&&c.value<v.value&&(c.value=v.value),g.value&&a.value>g.value&&(a.value=g.value),p.value&&c.value>p.value&&(c.value=p.value),e.disableAttributes.forEach(y=>{switch(y){case"l":i&=~q.l;break;case"t":i&=~q.t;break;case"w":i&=~q.w;break;case"h":i&=~q.h}}),document.documentElement.addEventListener("mousemove",u,!0),document.documentElement.addEventListener("mousedown",L,!0),document.documentElement.addEventListener("mouseup",P,!0),document.documentElement.addEventListener("touchmove",u,!0),document.documentElement.addEventListener("touchstart",L,!0),document.documentElement.addEventListener("touchend",P,!0)}),{rootEl:r,style:o,handleMove:u,handleUp:P,handleDown:L,restoreSize:l}},bi=K({name:"SuResizable",props:_r,emits:["resize:start","resize:move","resize:end"],setup(e,t){const{rootEl:r,style:n,handleMove:s,handleDown:a,handleUp:c}=yi(e,t);return It(()=>{document.documentElement.removeEventListener("mousemove",s,!0),document.documentElement.removeEventListener("mousedown",a,!0),document.documentElement.removeEventListener("mouseup",c,!0),document.documentElement.removeEventListener("touchmove",s,!0),document.documentElement.removeEventListener("touchstart",a,!0),document.documentElement.removeEventListener("touchend",c,!0)}),{rootEl:r,style:n}}});function _i(e,t,r,n,s,a){return x(),k("div",{ref:"rootEl",class:"su-resizable",style:He(e.style)},[ee(e.$slots,"default"),(x(!0),k(Nt,null,zt(e.active,c=>(x(),k("div",{key:c,class:Se("resizable-"+c)},null,2))),128))],4)}var Ei=ae(bi,[["render",_i],["__file","/builds/front-end/SmartUI/smart-ui/src/resizable/resizable.vue"]]);const Si=oe(Ei),Pt=Object.freeze(Object.defineProperty({__proto__:null,SuDialog:os,SuIcon:ft,SuResizable:Si,SuUploader:di,SuUploaderBtn:gi,SuUploaderDrop:vi,SuUploaderFile:pi,SuUploaderList:hi,SuUploaderUnsupport:mi,dialogEmits:Jt,dialogProps:Kt,iconProps:Bt,resizableProps:_r,uploadEmits:fr,uploadProps:lr},Symbol.toStringTag,{value:"Module"}));async function wi(e){let t;return e.image?t=await Ci(e):t=Er(e),t.toDataURL("image/png")}function Er(e){const{font:t,text:r,textColor:n,width:s,height:a,gap:c,canvasHeight:d,canvasWidth:v,rotate:g}=e,p=document.createElement("canvas");Object.assign(p,{width:v,height:d});const m=p.getContext("2d");if(m){m.font=t,m.fillStyle=n||"rgba(0, 0, 0, 0.15)",m.textAlign="left",m.textBaseline="middle";const b=s+c[0]*2,E=a+c[1]*2,D=Math.ceil(v/b),S=Math.ceil(d/E);let _=64;if(typeof r=="string")_=m.measureText(r).width/2;else{const h=[];r.forEach(f=>{const i=m.measureText(f).width;h.push(i)}),_=Math.max(...h)/2}for(let h=0;h<S;h++)for(let f=0;f<D;f++)m.save(),m.translate((f+h%2/2)*b+20,E*h+_),m.rotate(g*Math.PI/180),typeof r=="string"?m.fillText(r,0,0):r.forEach((i,o)=>{const l=24*o;m.fillText(i,0,l)}),m.restore()}return p}function Ci(e){const{width:t,height:r,image:n,gap:s,canvasHeight:a,canvasWidth:c,rotate:d}=e;return new Promise(v=>{const g=document.createElement("canvas");Object.assign(g,{width:c,height:a});const p=g.getContext("2d");if(p){const m=t+s[0]*2,b=r+s[1]*2,E=Math.ceil(c/m),D=Math.ceil(a/b),S=new Image;S.src=n,S.setAttribute("crossOrigin","Anonymous"),S.onload=()=>{for(let _=0;_<D;_++)for(let h=0;h<E;h++)p.save(),p.translate((h+_%2/2)*m+20,b*(_+1/2)),p.rotate(d*Math.PI/180),p.drawImage(S,0,0,t,r),p.restore();v(g)},S.onerror=()=>{v(Er(e))}}})}async function $t(e,t){const{text:r,fontSize:n=16,textColor:s="rgba(180, 180, 180, 0.4)",fontFamily:a="sans-serif",width:c=120,height:d=64,image:v,gap:g=[100,80],rotate:p=-22,zIndex:m=9}=t.value,b=`${n}px ${a}`,E=e,{scrollHeight:D,scrollWidth:S}=E,_={font:b,text:r,textColor:s,width:c,height:d,canvasHeight:D,canvasWidth:S,image:v,gap:g,rotate:p,zIndex:m},h=E.getElementsByClassName("watermark-box");if(h.length)for(let i=0;i<h.length;i++)E.removeChild(h[i]);E.style.position="relative";const f=document.createElement("div");f.style.pointerEvents="none",f.className="watermark-box",f.id="watermark-box",f.style.top="0px",f.style.left="0px",f.style.position="absolute",f.style.height=`${D}px`,f.style.width=`${S}px`,f.style.zIndex=m,wi(_).then(i=>{f.style.background=`url(${i}) left top repeat`,E.appendChild(f)})}const Ai={mounted(e,t){$t(e,t);const r=new MutationObserver(s=>{s.forEach(a=>{if(a.removedNodes.length>0&&a.removedNodes[0].className==="watermark-box"&&$t(e,t),a.type==="attributes"){const c=e.getElementsByClassName("watermark-box");if(c.length)for(let d=0;d<c.length;d++)e.removeChild(c[d])}})});new ResizeObserver(Ur.throttle(()=>{const s=e.getElementsByClassName("watermark-box");if(s.length)for(let a=0;a<s.length;a++)e.removeChild(s[a])},1e3)).observe(e),r.observe(e,{childList:!0,attributes:!0,subtree:!0,attributesOldValue:!0,characterData:!0,characterDataOldValue:!0})}},kt=Object.freeze(Object.defineProperty({__proto__:null,SmartDrag:tr,SmartDragHandle:rr,SmartResize:sr,SmartResizeHandle:ir,SmartWatermark:Ai},Symbol.toStringTag,{value:"Module"})),Li="1.1.6",Oi=function(e){return Object.keys(Pt).forEach(t=>{const r=Pt[t];r.install&&e.use(r)}),Object.keys(kt).forEach(t=>{e.directive(t,kt[t])}),e};var xi={version:Li,install:Oi};export{Gr as a,Mt as c,xi as i,en as p,an as r};
